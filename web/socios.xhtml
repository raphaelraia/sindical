
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>Sindical - Sócios</title>
        <meta http-equiv="X-UA-Compatible" content="IE=9" />
        <link rel="shortcut icon" href="#{facesContext.externalContext.requestContextPath}/Imagens/favicon.ico"/>  
        <style type="text/css">
            .ui-widget-content .ui-inputfield{ padding: 8px!important; } 
            .ui-button { padding: 3px!important; }
        </style>

        <script type="text/javascript">
            // BLOQUEIA -- DESABILITA -- DISABLED -- ENTER
            // VERIFICA SE OQ ESTOU DIGITANDO É STRING
            function stopRKey(evt) {
                var evt = (evt) ? evt : ((event) ? event : null);
                //var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null); 
                if (evt.keyCode === 13) {
                    return false;
                }
            }

            document.onkeypress = stopRKey;
        </script>
    </h:head>
    <h:body>
        <!-- INICIA DIV wrap e main -->
        <div id="wrapx">
            <div id="mainx">
                <!-- INICIA DIV wrap e main -->  
                <f:subview id="header">
                    <ui:include src="templates/templatePrime.xhtml"/>
                    <ui:include src="templates/templateStatus.xhtml"/>
                </f:subview>
                <f:view>
                    <ui:include src="templates/templatePhotoCapture.xhtml" />
                    <ui:include src="templates/templatePhotoUpload.xhtml" />
                    <ui:include src="templates/templatePhotoCropper.xhtml" />

                    <p:panel style="margin: 0 auto; border: 0; width: #{configuracaoBean.resolucao.tipoResolucao.tamanho}">
                        <h:outputText value="Cadastro do Sócio" styleClass="fonteHeader" />
                        <h:form id="formSocios">
                            <c:set scope="request" var="object" value="${sociosBean.socios}"/>
                            <p:growl id="i_growl" showDetail="true" showSummary="true"  />
                            <p:dialog widgetVar="i_dlg_c" header="Mensagem" resizable="false" modal="true">
                                <p:messages id="i_msg" showDetail="true" />  
                                <f:facet name="footer">
                                    <p:commandButton value="OK" onclick="PF('i_dlg_c').hide();" icon="ui-icon-check"/>
                                </f:facet>
                            </p:dialog>

                            <div class="clear"></div>

                            <p:panel styleClass="fundoCinza">
                                <h:panelGrid columns="2">
                                    <h:outputLabel value="Dados da Pessoa " style="font-weight: bold"/><br />
                                    <h:outputText value="#{sociosBean.servicoPessoa.pessoa.tipoDocumento.descricao}: #{sociosBean.servicoPessoa.pessoa.documento}" style="font-size: 12pt!important;"/>
                                    <h:commandLink id="i_link_pessoa" action="#{sociosBean.editarTitular()}" value="#{sociosBean.servicoPessoa.pessoa.nome}" style="margin-left: 20px; font-size: 12pt!important;"/>
                                    <p:tooltip for="i_link_pessoa">
                                        <p:graphicImage name="#{sociosBean.servicoPessoa.pessoa.fotoResource}" cache="false" width="100"/>
                                    </p:tooltip>
                                </h:panelGrid>
                            </p:panel>


                            <p:panel rendered="#{sociosBean.matriculaSocios.id != -1 and sociosBean.matriculaSocios.motivoInativacao != null and sociosBean.matriculaSocios.motivoInativacao.id != -1}" styleClass="margin-top-max ui-rt-messages-fatal"> 
                                <h:panelGrid>
                                    <h:outputLabel value="ESTE SÓCIO ESTA INÁTIVO DESDE: #{sociosBean.matriculaSocios.inativo}" style="font-size: 12pt!important" styleClass="bold"/>
                                    <h:column>
                                        <h:outputLabel value="Motivo: #{sociosBean.matriculaSocios.motivoInativacao.descricao}" />
                                        <p:commandButton icon="ui-icon-info" onclick="PF('i_dlg_smi_detalhes').show()" rendered="#{sociosBean.matriculaSocios.motivoInativacao.id eq 6}" title="Ver detalhes" styleClass="margin-left"/>
                                    </h:column>
                                </h:panelGrid>
                                <p:commandButton icon="ui-icon-check" value="CLIQUE AQUI PARA REATIVAR" onclick="PF('i_dlg_re').show();" disabled="#{controleAcessoBean.verificarPermissao('linkSocio', 3)}" title="SÓCIO 'ATIVAR' E 'INATIVAR' - BOTÃO (Excluir/Alterar)" styleClass="bold margin-top" />
                            </p:panel>                            

                            <p:panel styleClass="fundoCinza margin-top-max">
                                <h:panelGrid columns="2">
                                    <h:outputLabel value="Filial: "/>
                                    <p:selectOneMenu value="#{sociosBean.idFilial}">
                                        <p:ajax event="change" update="@this" />
                                        <f:selectItems value="#{sociosBean.listaFilial}"/>
                                    </p:selectOneMenu>                                                               
                                </h:panelGrid>
                            </p:panel>

                            <h:panelGroup id="i_panel_tipo" layout="block">
                                <h:panelGrid columns="4" style="margin-top: 10px; width: 100%">
                                    <p:column>
                                        <h:outputLabel value="Grupo Categoria"/><br />
                                        <p:selectOneMenu value="#{sociosBean.idGrupoCategoria}" style="width: 380px" disabled="#{sociosBean.socios.matriculaSocios.id != -1}">
                                            <p:ajax event="change" update="@this i_panel_tipo i_panel_servicos i_panel_dependente" listener="#{sociosBean.atualizarCategoria()}"/>
                                            <f:selectItems value="#{sociosBean.listaGrupoCategoria}"/>
                                        </p:selectOneMenu>
                                    </p:column>

                                    <p:column>
                                        <h:outputLabel value="Categoria" style="margin-left: 30px"/><br />
                                        <p:selectOneMenu value="#{sociosBean.idCategoria}" style="margin-left: 30px; width: 380px" valueChangeListener="#{sociosBean.atualizarListaCategoria()}">
                                            <p:ajax event="change" update="@this i_panel_tipo i_panel_servicos i_panel_dependente" listener="#{sociosBean.atualizarListaCategoria()}"/> 
                                            <f:selectItems value="#{sociosBean.listaCategoria}"/>
                                        </p:selectOneMenu>
                                    </p:column>

                                    <p:column>
                                        <h:outputLabel value="NÚMERO DA MATRÍCULA" style="margin-left: 30px"/><br />
                                        <p:inputText value="#{sociosBean.matriculaSocios.nrMatricula}" onclick="PF('i_dlg_matricula').show();" size="17" readonly="true" style="margin-left: 30px; font-weight: bold; font-size: 10pt!important; cursor: pointer; background: #9ccaaa; text-align: center"/>
                                    </p:column>
                                </h:panelGrid>
                                <h:panelGroup layout="block" rendered="#{sociosBean.categoria != null and sociosBean.categoria.bloqueiaMeses}">
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="PERÍODO DE COBRANÇA DA MENSALIDADE: "/>
                                        <p:selectOneMenu value="#{sociosBean.idSisPeriodo}">
                                            <p:ajax event="change" update="@this i_block_mensalidades formSocios:i_growl" listener="#{sociosBean.listenerPeriodo()}"/>
                                            <f:selectItems value="#{sociosBean.listSisPeriodos}"/>
                                        </p:selectOneMenu>                                 
                                    </h:panelGrid>
                                    
                                    <p:panel header="Geração de Mensalidades: Gerar para meses marcados" styleClass="margin-top" id="i_block_mensalidades">
                                        <h:panelGrid columns="12" cellspacing="5">
                                            <h:outputLabel value="Jan" />
                                            <h:outputLabel value="Fev" />
                                            <h:outputLabel value="Mar" />
                                            <h:outputLabel value="Abr" />
                                            <h:outputLabel value="Mai" />
                                            <h:outputLabel value="Jun" />
                                            <h:outputLabel value="Jul" />
                                            <h:outputLabel value="Ago" />
                                            <h:outputLabel value="Set" />
                                            <h:outputLabel value="Out" />
                                            <h:outputLabel value="Nov" />
                                            <h:outputLabel value="Dez" />
                                            <p:selectBooleanCheckbox value="#{sociosBean.bloqueio.jan}" disabled="true">
                                                <p:ajax event="change" update="@this i_growl" listener="#{sociosBean.listenerBloqueio(sociosBean.servicoPessoa.id, 1)}" global="false"/>
                                            </p:selectBooleanCheckbox>
                                            <p:selectBooleanCheckbox value="#{sociosBean.bloqueio.fev}" disabled="true">
                                                <p:ajax event="change" update="@this i_growl" listener="#{sociosBean.listenerBloqueio(sociosBean.servicoPessoa.id, 2)}" global="false"/>
                                            </p:selectBooleanCheckbox>
                                            <p:selectBooleanCheckbox value="#{sociosBean.bloqueio.mar}" disabled="true">
                                                <p:ajax event="change" update="@this i_growl" listener="#{sociosBean.listenerBloqueio(sociosBean.servicoPessoa.id, 3)}" global="false"/>
                                            </p:selectBooleanCheckbox>
                                            <p:selectBooleanCheckbox value="#{sociosBean.bloqueio.abr}" disabled="true">
                                                <p:ajax event="change" update="@this i_growl" listener="#{sociosBean.listenerBloqueio(sociosBean.servicoPessoa.id, 4)}" global="false"/>
                                            </p:selectBooleanCheckbox>
                                            <p:selectBooleanCheckbox value="#{sociosBean.bloqueio.mai}" disabled="true">
                                                <p:ajax event="change" update="@this i_growl" listener="#{sociosBean.listenerBloqueio(sociosBean.servicoPessoa.id, 5)}" global="false"/>
                                            </p:selectBooleanCheckbox>
                                            <p:selectBooleanCheckbox value="#{sociosBean.bloqueio.jun}" disabled="true">
                                                <p:ajax event="change" update="@this i_growl" listener="#{sociosBean.listenerBloqueio(sociosBean.servicoPessoa.id, 6)}" global="false"/>
                                            </p:selectBooleanCheckbox>
                                            <p:selectBooleanCheckbox value="#{sociosBean.bloqueio.jul}" disabled="true">
                                                <p:ajax event="change" update="@this i_growl" listener="#{sociosBean.listenerBloqueio(sociosBean.servicoPessoa.id, 7)}" global="false"/>
                                            </p:selectBooleanCheckbox>
                                            <p:selectBooleanCheckbox value="#{sociosBean.bloqueio.ago}" disabled="true">
                                                <p:ajax event="change" update="@this i_growl" listener="#{sociosBean.listenerBloqueio(sociosBean.servicoPessoa.id, 8)}" global="false"/>
                                            </p:selectBooleanCheckbox>
                                            <p:selectBooleanCheckbox value="#{sociosBean.bloqueio.set}" disabled="true">
                                                <p:ajax event="change" update="@this i_growl" listener="#{sociosBean.listenerBloqueio(sociosBean.servicoPessoa.id, 9)}" global="false"/>
                                            </p:selectBooleanCheckbox>
                                            <p:selectBooleanCheckbox value="#{sociosBean.bloqueio.out}" disabled="true">
                                                <p:ajax event="change" update="@this i_growl" listener="#{sociosBean.listenerBloqueio(sociosBean.servicoPessoa.id, 10)}" global="false"/>
                                            </p:selectBooleanCheckbox>
                                            <p:selectBooleanCheckbox value="#{sociosBean.bloqueio.nov}" disabled="true">
                                                <p:ajax event="change" update="@this i_growl" listener="#{sociosBean.listenerBloqueio(sociosBean.servicoPessoa.id, 11)}" global="false"/>
                                            </p:selectBooleanCheckbox>
                                            <p:selectBooleanCheckbox value="#{sociosBean.bloqueio.dez}" disabled="true">
                                                <p:ajax event="change" update="@this i_growl" listener="#{sociosBean.listenerBloqueio(sociosBean.servicoPessoa.id, 12)}" global="false"/>
                                            </p:selectBooleanCheckbox>
                                        </h:panelGrid>
                                    </p:panel>
                                </h:panelGroup>                                
                            </h:panelGroup>
                            <hr />

                            <h:panelGrid id="i_panel_servicos" columns="9" style="margin-top: 5px">
                                <p:column>
                                    <h:outputLabel value="Valor" /><br />
                                    <p:inputText value="#{sociosBean.valorServico}" size="7" style="text-align: right" disabled="#{controleAcessoBean.botaoDescontoSocial || sociosBean.descontoSocial.id != 1}">
                                        <p:ajax event="blur" update="@this i_panel_servicos" global="false" listener="#{sociosBean.calculoDesconto()}"/>
                                    </p:inputText>
                                </p:column>

                                <p:column>
                                    <h:outputLabel value="Desconto" /><br />
                                    <p:inputText value="#{sociosBean.servicoPessoa.nrDescontoString}" size="5" style="text-align: right" disabled="#{controleAcessoBean.botaoDescontoSocial || sociosBean.descontoSocial.id != 1}">
                                        <p:ajax event="blur" update="@this i_panel_servicos" global="false" listener="#{sociosBean.calculoValor()}"/>
                                    </p:inputText>
                                </p:column>

                                <p:column rendered="false">
                                    <br />
                                    <h:outputLabel value=" % "/>
                                </p:column>

                                <p:column>
                                    <br />      
                                    <p:selectOneMenu value="#{sociosBean.index_desconto}" style="padding-right: 20px">
                                        <p:ajax event="change" update="@this i_panel_servicos" global="false" listener="#{sociosBean.selecionarDesconto(null)}"/>
                                        <f:selectItems value="#{sociosBean.listaDescontoSocial}"/>
                                    </p:selectOneMenu>
                                </p:column>

                                <p:column>
                                    <br />
                                    <p:commandButton icon="ui-icon-plusthick" actionListener="#{sociosBean.clickSalvarDesconto()}" disabled="#{controleAcessoBean.verificarPermissao('libera_desconto_social', 1)}" title="Adicionar um Novo Desconto (LIBERA DESCONTO SOCIAL)" />
                                </p:column>


                                <p:column>
                                    <br />
                                    <p:commandButton icon="ui-icon-extlink" actionListener="#{sociosBean.clickAlterarDesconto()}" disabled="#{controleAcessoBean.botaoDescontoSocial or (sociosBean.index_desconto == 0 and !controleAcessoBean.botaoDescontoSocial)}" title="Alterar esse Desconto"/>
                                </p:column>

                                <p:column>
                                    <h:outputLabel value="Serviços" rendered="#{sociosBean.renderServicos}" style="margin-left: 18px;"/><br />
                                    <p:selectOneMenu value="#{sociosBean.idServico}" rendered="#{sociosBean.renderServicos}" style="margin-left: 18px; width: 400px">
                                        <f:selectItems value="#{sociosBean.listaServicos}"/>
                                    </p:selectOneMenu>
                                </p:column>

                                <p:column>
                                    <p:selectBooleanCheckbox value="#{sociosBean.chkContaCobranca}" style="" itemLabel="Conta Cobrança">
                                        <p:ajax event="change" update="@this idTipoDocumento" listener="#{sociosBean.loadTipoDocumento()}"/>
                                    </p:selectBooleanCheckbox><br />
                                    <p:selectOneMenu id="idTipoDocumento" value="#{sociosBean.idTipoDocumento}" style="width: 150px">
                                        <p:ajax event="change" update="@this" />
                                        <f:selectItems value="#{sociosBean.listaTipoDocumento}" />
                                    </p:selectOneMenu>
                                </p:column>

                                <p:column>
                                    <h:outputLabel value="Dia do Vencimento" rendered="#{sociosBean.renderServicos}" style="margin-left: 25px;" title="Dia do Vencimento para os Boletos a serem Gerados"/><br />
                                    <h:panelGrid id="i_panel_dia_vencimento" columns="2">
                                        <p:selectOneMenu value="#{sociosBean.servicoPessoa.nrDiaVencimento}" style="margin-left: 25px; width: 60px" disabled="true">
                                            <f:selectItem itemValue="1" itemLabel="01"/>
                                            <f:selectItem itemValue="2" itemLabel="02"/>
                                            <f:selectItem itemValue="3" itemLabel="03"/>
                                            <f:selectItem itemValue="4" itemLabel="04"/>
                                            <f:selectItem itemValue="5" itemLabel="05"/>
                                            <f:selectItem itemValue="6" itemLabel="06"/>
                                            <f:selectItem itemValue="7" itemLabel="07"/>
                                            <f:selectItem itemValue="8" itemLabel="08"/>
                                            <f:selectItem itemValue="9" itemLabel="09"/>
                                            <f:selectItem itemValue="10" itemLabel="10"/>
                                            <f:selectItem itemValue="11" itemLabel="11"/>
                                            <f:selectItem itemValue="12" itemLabel="12"/>
                                            <f:selectItem itemValue="13" itemLabel="13"/>
                                            <f:selectItem itemValue="14" itemLabel="14"/>
                                            <f:selectItem itemValue="15" itemLabel="15"/>
                                            <f:selectItem itemValue="16" itemLabel="16"/>
                                            <f:selectItem itemValue="17" itemLabel="17"/>
                                            <f:selectItem itemValue="18" itemLabel="18"/>
                                            <f:selectItem itemValue="19" itemLabel="19"/>
                                            <f:selectItem itemValue="20" itemLabel="20"/>
                                            <f:selectItem itemValue="21" itemLabel="21"/>
                                            <f:selectItem itemValue="22" itemLabel="22"/>
                                            <f:selectItem itemValue="23" itemLabel="23"/>
                                            <f:selectItem itemValue="24" itemLabel="24"/>
                                            <f:selectItem itemValue="25" itemLabel="25"/>
                                            <f:selectItem itemValue="26" itemLabel="26"/>
                                            <f:selectItem itemValue="27" itemLabel="27"/>
                                            <f:selectItem itemValue="28" itemLabel="28"/>
                                            <f:selectItem itemValue="29" itemLabel="29"/>
                                            <f:selectItem itemValue="30" itemLabel="30"/>
                                            <f:selectItem itemValue="31" itemLabel="31"/>
                                        </p:selectOneMenu>
                                        <p:commandLink value="Alterar dia Vencimento" onclick="PF('dlg_dv').show();" rendered="#{sociosBean.servicoPessoa.id != -1}"/>
                                        <p:commandLink value="Alterar dia Vencimento" onclick="PF('dlg_dv').show();" disabled="true" style="cursor: pointer" rendered="#{sociosBean.servicoPessoa.id == -1}" title="Não existe serviço pessoa para alterar este vencimento"/>
                                    </h:panelGrid>
                                </p:column>
                            </h:panelGrid>

                            <p:dialog widgetVar="dlg_dv" header="Alterar dia de vencimento?" modal="true" width="300">
                                <center>
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="Dia do Vencimento: " />
                                        <h:selectOneMenu value="#{sociosBean.servicoPessoa.nrDiaVencimento}" >
                                            <p:ajax event="change" update="@this @form" oncomplete="PF('dlg_dv').hide()" listener="#{sociosBean.salvarData}"/>
                                            <f:selectItem itemValue="1" itemLabel="01"/>
                                            <f:selectItem itemValue="2" itemLabel="02"/>
                                            <f:selectItem itemValue="3" itemLabel="03"/>
                                            <f:selectItem itemValue="4" itemLabel="04"/>
                                            <f:selectItem itemValue="5" itemLabel="05"/>
                                            <f:selectItem itemValue="6" itemLabel="06"/>
                                            <f:selectItem itemValue="7" itemLabel="07"/>
                                            <f:selectItem itemValue="8" itemLabel="08"/>
                                            <f:selectItem itemValue="9" itemLabel="09"/>
                                            <f:selectItem itemValue="10" itemLabel="10"/>
                                            <f:selectItem itemValue="11" itemLabel="11"/>
                                            <f:selectItem itemValue="12" itemLabel="12"/>
                                            <f:selectItem itemValue="13" itemLabel="13"/>
                                            <f:selectItem itemValue="14" itemLabel="14"/>
                                            <f:selectItem itemValue="15" itemLabel="15"/>
                                            <f:selectItem itemValue="16" itemLabel="16"/>
                                            <f:selectItem itemValue="17" itemLabel="17"/>
                                            <f:selectItem itemValue="18" itemLabel="18"/>
                                            <f:selectItem itemValue="19" itemLabel="19"/>
                                            <f:selectItem itemValue="20" itemLabel="20"/>
                                            <f:selectItem itemValue="21" itemLabel="21"/>
                                            <f:selectItem itemValue="22" itemLabel="22"/>
                                            <f:selectItem itemValue="23" itemLabel="23"/>
                                            <f:selectItem itemValue="24" itemLabel="24"/>
                                            <f:selectItem itemValue="25" itemLabel="25"/>
                                            <f:selectItem itemValue="26" itemLabel="26"/>
                                            <f:selectItem itemValue="27" itemLabel="27"/>
                                            <f:selectItem itemValue="28" itemLabel="28"/>
                                            <f:selectItem itemValue="29" itemLabel="29"/>
                                            <f:selectItem itemValue="30" itemLabel="30"/>
                                            <f:selectItem itemValue="31" itemLabel="31"/>
                                        </h:selectOneMenu>                        
                                    </h:panelGrid>
                                </center>
                            </p:dialog>

                            <h:panelGrid columns="8" style="margin-top: 5px">
                                <p:column>
                                    <h:outputLabel value="Data Filiação"/><br />
                                    <p:inputMask value="#{sociosBean.matriculaSocios.emissao}" size="8" mask="99/99/9999" converter="#{isDateStringa}">
                                        <p:ajax event="change" update="@this" />
                                    </p:inputMask>
                                </p:column>

                                <p:column>
                                    <h:outputLabel value="Ref. Vigoração" style="margin-left: 20px"/><br />
                                    <p:inputMask value="#{sociosBean.servicoPessoa.referenciaVigoracao}" size="5" mask="99/9999" style="margin-left: 20px" converter="#{isDateReference}">
                                        <p:ajax event="change" update="@this" />
                                    </p:inputMask>
                                </p:column>

                                <p:column>
                                    <h:outputLabel value="Ref. Validade" rendered="#{sociosBean.renderServicos}" style="margin-left: 20px"/><br />
                                    <p:inputMask value="#{sociosBean.servicoPessoa.referenciaValidade}" size="5" rendered="#{servicoPessoaBean.renderServicos}" mask="99/9999" style="margin-left: 20px" converter="#{isDateReference}">
                                        <p:ajax event="change" update="@this" />
                                    </p:inputMask>
                                </p:column>

                                <p:column>
                                    <h:outputLabel value="Validade Carteirinha" style="margin-left: 20px"/><br />
                                    <p:inputMask value="#{sociosBean.socCarteirinha.validadeCarteirinha}" size="13" mask="99/99/9999" style="margin-left: 20px; text-align: center" readonly="true"/>
                                </p:column>

                                <p:column>
                                    <h:outputLabel value="Via" style="margin-left: 20px"/><br />
                                    <p:inputText value="#{(sociosBean.socCarteirinha.via lt 10) ? '0'.concat(sociosBean.socCarteirinha.via) : sociosBean.socCarteirinha.via}" size="5" style="margin-left: 20px; text-align: center" readonly="true"/>
                                </p:column>

                                <p:column>
                                    <h:outputLabel value="Cidade do Convênio" style="margin-left: 20px" rendered="false"/><br />
                                    <p:commandButton value="#{sociosBean.matriculaSocios.cidade.cidade} - #{sociosBean.matriculaSocios.cidade.uf}" action="#{chamadaPaginaBean.cidade}" style="margin-left: 20px" rendered="false"/>
                                </p:column>

                                <p:column>
                                    <br />
                                    <p:selectBooleanCheckbox value="#{sociosBean.servicoPessoa.descontoFolha}" style="margin-left: 25px;" itemLabel="Descontar em Folha"/>
                                </p:column>

                                <p:panel style="background-color: #9ccaaa; margin-left:30px" rendered="#{sociosBean.matriculaSocios.motivoInativacao == null}">
                                    <br />
                                    <h:outputLabel value="SÓCIO ATIVO" style="font-size: 10pt; font-weight: bold"/>
                                </p:panel>
                            </h:panelGrid>

                            <p:dialog widgetVar="i_dlg_matricula" header="Editar Matrícula" resizable="false" width="400" modal="true">
                                <h:panelGrid columns="2">
                                    <p:column>
                                        <h:outputLabel value="Matrícula: "/>
                                        <p:inputText value="#{sociosBean.matriculaSocios.nrMatricula}" style="font-size: 10pt!important; text-align: center" size="5"/>    
                                    </p:column>
                                </h:panelGrid>
                                <f:facet name="footer">
                                    <h:panelGrid>
                                        <p:commandButton value="Sair" styleClass="ui-confirmdialog-no" onclick="PF('i_dlg_matricula').hide()" icon="ui-icon-check" update="i_panel_tipo"/>
                                    </h:panelGrid>
                                </f:facet>
                            </p:dialog>

                            <h:panelGrid columns="2" style="width: 100%">
                                <p:column>
                                    <h:outputLabel value="Observação" /><br />
                                    <p:inputTextarea value="#{sociosBean.matriculaSocios.observacao}" rows="4"  cols="190" maxlength="1000"/>
                                </p:column>
                            </h:panelGrid>

                            <h:panelGrid columns="1">
                                <p:column>
                                    <p:selectBooleanCheckbox value="#{sociosBean.matriculaSocios.bloqueiaObsAviso}" itemLabel="Bloquear Obs. Aviso"/>
                                </p:column>
                            </h:panelGrid>

                            <p:panel id="i_panel_dependente" header="Dependentes" styleClass="margin-top-max">
                                <h:panelGrid columns="2" style="width: 100%">
                                    <p:commandButton value="Criar Dependente" action="#{sociosBean.adicionarDependente}" update="i_panel_dependente i_msg" icon="ui-icon-circle-plus" disabled="#{sociosBean.matriculaSocios.motivoInativacao != null and sociosBean.matriculaSocios.motivoInativacao.id != -1}"/>
                                    <p:commandLink value="Sócio com Dependentes Inativos" id="id_dependente_inativos" rendered="#{sociosBean.listDependentesInativos.size() > 0}" style="float: right" onclick="PF('i_dlg_deps').show()" styleClass="font-color-red bold" update="i_l_d_i" disabled="#{controleAcessoBean.verificarPermissao('linkDependente', 1)}" actionListener="#{sociosBean.atualizarListaDependenteInativo}"/>
                                </h:panelGrid>

                                <p:dataTable var="listDependentes" id="tbl" value="#{sociosBean.listDependentes}" emptyMessage="Nenhum Dependente Adicionado." rowIndexVar="index" styleClass="margin-top">
                                    <p:column style="width: 30px; text-align: center">
                                        <p:commandButton icon="ui-icon-close" action="#{sociosBean.excluirDependente(listDependentes, index)}" update=":formSocios:i_panel_dependente" title="Excluir (DEPENDENTE 'INATIVAR' E 'REATIVAR' - LINK)" disabled="#{controleAcessoBean.verificarPermissao('linkDependente', 2)}" />
                                    </p:column>

                                    <p:column style="width: 90px; text-align: center">
                                        <p:graphicImage name="#{listDependentes.fisica.pessoa.foto}" style="width: 70px; height: auto;" cache="false"/>
                                    </p:column>

                                    <p:column headerText="Nome">
                                        <p:commandLink rendered="#{listDependentes.fisica.pessoa.id == -1}" value="Cadastrar ou Pesquisar um Dependente" oncomplete="PF('dlg_dependente').show()" action="#{sociosBean.editarOUsalvar(index)}" update=":formSocios:i_panel_dados :formSocios:tab_view:i_panel_pesquisa" style="font-size: 10pt!important" />
                                        <p:commandLink rendered="#{listDependentes.fisica.id != -1}" value="#{listDependentes.fisica.pessoa.documento} - #{listDependentes.fisica.pessoa.nome}" oncomplete="PF('dlg_dependente').show()" action="#{sociosBean.editarOUsalvar(index)}" update=":formSocios:i_panel_dados :formSocios:tab_view:i_panel_pesquisa" style="font-size: 10pt!important" title="#{listDependentes.fisica.pessoa.id}" />
                                    </p:column>

                                    <p:column headerText="Parentesco" style="text-align: center; width: 130px">
                                        <p:selectOneMenu value="#{listDependentes.idParentesco}" style="width: 100px">
                                            <p:ajax event="change" update="i_validade_dependente i_validade_dependente2 :formSocios:i_growl :formSocios:i_panel_dependente" listener="#{sociosBean.atualizaValidadeTela(index)}"/>
                                            <!-- <f:selectItems value="# {sociosBean.listaParentesco}"/> -->
                                            <f:selectItems value="#{listDependentes.listParentesco}"/>
                                        </p:selectOneMenu>
                                    </p:column>

                                    <p:column headerText="Via Carteirinha" style="text-align: center; width: 80px;">
                                        <p:inputText value="#{listDependentes.viaCarteirinha}" style="width: 40px; text-align: center"/>
                                    </p:column>

                                    <p:column headerText="Validade Carteirinha" style="text-align: center; width: 90px">
                                        <p:inputMask value="#{listDependentes.validadeCarteirinha}" mask="99/99/9999" readonly="true" id="i_validade_dependente2" style="width: 80px; text-align: center"/>
                                    </p:column>

                                    <p:column headerText="Validade Dependente" style="text-align: center; width: 90px">
                                        <p:inputMask id="i_validade_dependente" value="#{listDependentes.validadeDependente}" size="5" mask="99/9999" disabled="#{controleAcessoBean.verificarPermissao('validade_socio', 1)}" style="width: 70px; text-align: center">
                                            <p:ajax event="change" update="@this" />
                                        </p:inputMask>
                                    </p:column>

                                    <p:column headerText="Valor" style="text-align: center; width: 100px">
                                        <p:outputLabel value="R$ " />
                                        <p:inputText value="#{listDependentes.valorString}" size="5" style="text-align: center" disabled="#{listDependentes.fisica.id == -1}">
                                            <p:ajax event="blur" listener="#{sociosBean.calculoDescontoDependente(listDependentes)}" update="@this" />
                                        </p:inputText>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>

                            <p:dialog widgetVar="i_dlg_deps" header="Lista de Dependentes Inativos" resizable="false" width="800" modal="true" closeOnEscape="true">
                                <h:panelGrid id="i_l_d_i">
                                    <p:dataTable value="#{sociosBean.listDependentesInativos}" var="listDependentesInativos" rowIndexVar="index" emptyMessage="Nenhum Dependente Inativo">
                                        <p:column style="text-align: center" width="30">
                                            <p:commandButton title="Excluir (DEPENDENTE 'INATIVAR' E 'REATIVAR' - LINK)" icon="ui-icon-close" update=":formSocios:i_panel_dependente :formSocios:i_growl :formSocios:i_l_d_i" action="#{sociosBean.excluirDependente(listDependentesInativos, index)}" disabled="#{controleAcessoBean.verificarPermissao('linkDependente', 2)}"/>
                                        </p:column>
                                        <p:column headerText="Nome">
                                            <h:outputLabel value="#{listDependentesInativos.fisica.pessoa.nome}" />
                                        </p:column>
                                        <p:column headerText="Parentesco">
                                            <p:selectOneMenu value="#{listDependentesInativos.idParentesco}" disabled="true" syncTooltip="true">
                                                <f:selectItems value="#{listDependentesInativos.listParentesco}"/>
                                            </p:selectOneMenu>                                            
                                        </p:column>
                                        <p:column headerText="Validade Dependente" style="text-align: center" width="150">
                                            <p:inputMask id="i_validade_dependente_inativo" value="#{listDependentesInativos.validadeDependente}" size="5" mask="99/9999" converter="#{isDateReference}">
                                                <p:ajax event="change" update="@this" />
                                            </p:inputMask>
                                        </p:column>
                                        <p:column style="text-align: center" width="100">
                                            <p:commandButton value="Reativar" icon="ui-icon-check" update=":formSocios:i_panel_dependente :formSocios:i_growl :formSocios:i_l_d_i" action="#{sociosBean.reativarDependente(index)}" disabled="#{controleAcessoBean.verificarPermissao('linkDependente', 3)}" title="DEPENDENTE 'INATIVAR' E 'REATIVAR' - LINK (ALTERAR)"/>
                                        </p:column>
                                    </p:dataTable>
                                </h:panelGrid>
                                <f:facet name="footer">
                                    <h:panelGrid columns="2">
                                        <p:commandButton value="Sair" styleClass="ui-confirmdialog-no" oncomplete="PF('i_dlg_deps').hide()" update="i_panel_dependente"/>
                                    </h:panelGrid>
                                </f:facet>
                            </p:dialog>

                            <h:panelGrid columns="3" style="width: 100%">
                                <h:column>
                                    <h:panelGrid columns="10">
                                        <p:commandButton ajax="false" value="Voltar" action="#{sociosBean.editarTitular()}" />
                                        <p:commandButton onclick="PF('i_dlg_s').show()" value="#{sociosBean.lblSocio}" disabled="#{controleAcessoBean.botaoSalvar}" />
                                        <p:commandButton onclick="PF('i_dlg_e').show()" value="EXCLUIR" disabled="#{controleAcessoBean.botaoExcluir}" />
                                        <p:commandButton onclick="PF('i_dlg_i').show()" value="INATIVAR" rendered="#{sociosBean.matriculaSocios.motivoInativacao == null}" disabled="#{controleAcessoBean.verificarPermissao('linkSocio', 2)}" title="SÓCIO 'ATIVAR' E 'INATIVAR' - BOTÃO (Excluir)"/>
                                    </h:panelGrid>
                                </h:column>
                                <h:column>
                                    <h:panelGrid columns="2">
                                        <p:selectBooleanCheckbox value="#{sociosBean.imprimirVerso}" itemLabel="Imprimir Verso" disabled="true"/>
                                        <p:selectOneMenu value="#{sociosBean.tipoDestinario}" disabled="#{sociosBean.desabilitaImpressao}" rendered="false">
                                            <f:selectItem itemValue="socio"   itemLabel="para o Sócio"/>
                                            <f:selectItem itemValue="empresa" itemLabel="para a Empresa"/>
                                        </p:selectOneMenu>
                                    </h:panelGrid>
                                </h:column>
                                <h:column>
                                    <h:panelGrid columns="2">
                                        <p:commandButton value="Visualizar Carteirinha" action="#{sociosBean.confirmaImprimirCartao()}" disabled="#{sociosBean.desabilitaImpressao}" rendered="#{!sociosBean.registro.cobrancaCarteirinha}"/>
                                        <p:commandButton ajax="false" value="Imprimir Ficha" action="#{sociosBean.imprimirFichaSocial}" disabled="#{sociosBean.desabilitaImpressao}"/>
                                    </h:panelGrid>
                                </h:column>
                            </h:panelGrid>

                            <p:dialog widgetVar="i_dlg_s" header="Deseja #{sociosBean.lblSocio} este Sócio" resizable="false" width="400" modal="true">
                                <f:facet name="footer">
                                    <h:panelGrid columns="2">
                                        <p:commandButton value="Sim"      type="submit" styleClass="ui-confirmdialog-yes" action="#{sociosBean.salvar()}" update="formSocios" onclick="PF('i_dlg_s').hide()" icon="ui-icon-check" oncomplete="PF('i_dlg_c').show()"/>  
                                        <p:commandButton value="Cancelar" type="button" styleClass="ui-confirmdialog-no" onclick="PF('i_dlg_s').hide()" icon="ui-icon-close"/>       
                                    </h:panelGrid>
                                </f:facet>
                            </p:dialog>

                            <p:dialog widgetVar="i_dlg_e" header="Deseja EXCLUIR DEFINITIVAMENTE este Sócio" resizable="false" width="400" modal="true">
                                <f:facet name="footer">
                                    <h:panelGrid columns="2">
                                        <p:commandButton value="Sim"      type="submit" styleClass="ui-confirmdialog-yes" action="#{sociosBean.excluir()}" update="formSocios" onclick="PF('i_dlg_e').hide()" icon="ui-icon-check"/>  
                                        <p:commandButton value="Cancelar" type="button" styleClass="ui-confirmdialog-no" onclick="PF('i_dlg_e').hide()" icon="ui-icon-close"/>                                               
                                    </h:panelGrid>
                                </f:facet>
                            </p:dialog>

                            <p:dialog widgetVar="i_dlg_i" header="Deseja INATIVAR este Sócio" resizable="false" width="400" modal="true">
                                <h:panelGrid columns="2">
                                    <h:outputLabel value="Data de inativação:" />
                                    <p:inputMask value="#{sociosBean.dataInativacao}" size="8" maxlength="10" mask="99/99/9999" converter="#{isDateString}">
                                        <p:ajax event="change" update="@this" global="false"/>
                                    </p:inputMask>
                                    <h:outputLabel value="Motivo:" />
                                    <p:selectOneMenu value="#{sociosBean.idInativacao}">
                                        <p:ajax event="change" update="@this" global="false"/>
                                        <f:selectItems value="#{sociosBean.listaMotivoInativacao}"/>
                                    </p:selectOneMenu>
                                </h:panelGrid>
                                <f:facet name="footer">
                                    <h:panelGrid columns="2">
                                        <p:commandButton value="Inativar"      type="submit" styleClass="ui-confirmdialog-yes" action="#{sociosBean.validaMotivoInativacao()}" icon="ui-icon-check"/>  
                                        <p:commandButton value="Cancelar" type="button" styleClass="ui-confirmdialog-no" onclick="PF('i_dlg_i').hide()" icon="ui-icon-close"/>       
                                    </h:panelGrid>
                                </f:facet>
                            </p:dialog>

                            <p:dialog widgetVar="i_dlg_smi" header="Complementar Motivo de Inativação" resizable="false" width="400" modal="true">
                                <p:messages id="i_msg_motivo" autoUpdate="false" closable="true" showDetail="true"/>
                                <h:panelGrid columns="1" style="width: 100%">
                                    <h:outputLabel value="Motivo" />
                                    <p:inputTextarea style="width: 100%" value="#{sociosBean.matriculaSocios.motivo}" rows="3" placeholder="DIGITE AQUI">
                                        <p:ajax event="change" update="@this" global="false"/>
                                    </p:inputTextarea>
                                </h:panelGrid>
                                <f:facet name="footer">
                                    <h:panelGrid columns="2">
                                        <p:commandButton value="Confirmar" type="submit" action="#{sociosBean.inativarSocio()}" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
                                        <p:commandButton value="Voltar" type="button" styleClass="ui-confirmdialog-no" onclick="PF('i_dlg_smi').hide()" icon="ui-icon-close"/>
                                    </h:panelGrid>                                
                                </f:facet>

                            </p:dialog>

                            <p:dialog widgetVar="i_dlg_smi_detalhes" header="Motivo de Inativação" resizable="false" width="400" modal="true">
                                <h:panelGrid columns="1" style="width: 100%">
                                    <h:outputLabel value="#{sociosBean.matriculaSocios.motivo}" style="font-size: 11pt!important" />
                                </h:panelGrid>
                                <br />
                                <p:commandButton value="OK" style="clear: both" icon="ui-icon-check" onclick="PF('i_dlg_smi_detalhes').hide()"/>  
                            </p:dialog>

                            <p:dialog widgetVar="i_dlg_re" header="Deseja REATIVAR este Sócio" resizable="false" width="400" modal="true">
                                <h:panelGrid columns="2">
                                    <h:outputLabel value="Data de reativação: " />
                                    <p:inputMask value="#{sociosBean.dataReativacao}" size="8" maxlength="10" mask="99/99/9999"/>
                                </h:panelGrid>
                                <f:facet name="footer">
                                    <h:panelGrid columns="2">
                                        <p:commandButton value="Sim"      type="submit" styleClass="ui-confirmdialog-yes" action="#{sociosBean.reativarSocio()}" update="formSocios" onclick="PF('i_dlg_re').hide()" style="clear: both; float: left" icon="ui-icon-check" oncomplete="PF('i_dlg_c').show()"/>  
                                        <p:commandButton value="Cancelar" type="button" styleClass="ui-confirmdialog-no" onclick="PF('i_dlg_re').hide()" style="float: left" icon="ui-icon-close"/>                                               
                                    </h:panelGrid>
                                </f:facet>
                            </p:dialog>

                            <p:dialog widgetVar="dlg_validade_carteirinha" header="Carteirinha Vencida" resizable="false" width="400" modal="true">
                                <h:panelGrid columns="2">
                                    <h:outputLabel value="Esta carteirinha esta vencida! Alterar para nova validade?" /><br />
                                    <p:inputMask value="#{sociosBean.novaValidadeCartao}" size="8" maxlength="10" mask="99/99/9999"/>
                                </h:panelGrid>

                                <p:commandButton value="Sim" type="submit" styleClass="ui-confirmdialog-yes" action="#{sociosBean.visualizarCarteirinha(true)}" style="clear: both; float: left" icon="ui-icon-check" ajax="false"/>  
                                <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" onclick="PF('dlg_validade_carteirinha').hide()" style="float: left" icon="ui-icon-close"/>       
                            </p:dialog>

                            <p:dialog widgetVar="dlg_imprimir_carteirinha" header="Imprimir Carteirinha" resizable="false" width="400" modal="true">
                                <h:outputLabel value="Deseja realmente imprimir essa carteirinha?" />
                                <f:facet name="footer">
                                    <h:panelGrid columns="2">
                                        <p:commandButton value="Sim" type="submit" styleClass="ui-confirmdialog-yes" action="#{sociosBean.visualizarCarteirinha(false)}" icon="ui-icon-check" ajax="false"/>  
                                        <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" onclick="PF('dlg_imprimir_carteirinha').hide()" icon="ui-icon-close"/>                                        
                                    </h:panelGrid>
                                </f:facet>

                            </p:dialog>

                            <p:dialog header="Cadastrar ou Pesquisar um Dependente" widgetVar="dlg_dependente" modal="true" resizable="false" width="900" visible="#{sociosBean.modelVisible}">
                                <p:ajax event="close" listener="#{sociosBean.fechaModal()}" update="formSocios"/>  
                                <h:panelGrid id="i_panel_dados">
                                    <p:tabView id="tab_view">
                                        <p:tab  title="Cadastro de Dependente">
                                            <h:panelGrid columns="2" style="width: 400px" columnClasses="verticalAlignTop, verticalAlignTop" >
                                                <p:column>

                                                    <p:messages id="i_msg" showDetail="true" closable="true" />   

                                                    <p:panel styleClass="fundoCinza">
                                                        <h:panelGrid columns="4" style="width: 200px">
                                                            <p:column>
                                                                <h:outputLabel value="Cadastrado"/><br />
                                                                <p:inputMask value="#{sociosBean.novoDependente.pessoa.criacao}" size="8" mask="99/99/9999"/>
                                                            </p:column>

                                                            <p:column>
                                                                <h:outputLabel value="CPF" style="margin-left: 10px"/><br />
                                                                <p:inputMask size="13" value="#{sociosBean.novoDependente.pessoa.documento}" mask="999.999.999-99" style="margin-left: 10px">
                                                                    <p:ajax event="change" update=":formSocios:i_panel_dados" listener="#{sociosBean.pesquisaCPF()}"/>
                                                                </p:inputMask>
                                                            </p:column>

                                                            <p:column>
                                                                <h:outputLabel value="RG" style="margin-left: 10px"/><br />
                                                                <p:inputText size="12" maxlength="10" value="#{sociosBean.novoDependente.rg}" style="margin-left: 10px">
                                                                    <p:ajax event="change" update="@this" />
                                                                </p:inputText>
                                                            </p:column>

                                                            <p:column>
                                                                <h:outputLabel value="Nascimento" style="margin-left: 10px"/><br />
                                                                <p:inputMask size="8" value="#{sociosBean.novoDependente.nascimento}" mask="99/99/9999" style="margin-left: 10px">
                                                                    <p:ajax event="blur" update="@this" />
                                                                </p:inputMask>
                                                            </p:column>
                                                        </h:panelGrid>

                                                        <h:panelGrid columns="1" style="margin-top: 10px; width: 200px">
                                                            <p:column>
                                                                <h:outputLabel value="Nome do Dependente" /><br />
                                                                <p:inputText value="#{sociosBean.novoDependente.pessoa.nome}" converter="#{toUpperCase}" style="width: 430px">
                                                                    <p:ajax event="blur" listener="#{sociosBean.existePessoaNomeNascimento()}" />
                                                                </p:inputText>
                                                            </p:column>
                                                        </h:panelGrid>
                                                    </p:panel>
                                                    <h:panelGrid columns="3" style="margin-top: 10px; width: 100%">
                                                        <p:column>
                                                            <h:outputLabel value="Sexo"/><br />
                                                            <p:selectOneRadio value="#{sociosBean.novoDependente.sexo}">
                                                                <p:ajax event="change" update="i_panel_foto" />
                                                                <f:selectItem itemValue="F" itemLabel="Feminino"/>
                                                                <f:selectItem itemValue="M" itemLabel="Masculino"/>
                                                            </p:selectOneRadio>
                                                        </p:column>

                                                        <h:column>
                                                            <h:outputLabel value="Estado Civil" style=""/><br />
                                                            <p:selectOneMenu value="#{sociosBean.novoDependente.estadoCivil}" style="width: 130px;">
                                                                <p:ajax event="change" update="@this" global="false" />
                                                                <f:selectItem itemValue="Solteiro(a)" itemLabel="Solteiro(a)"/>
                                                                <f:selectItem itemValue="Casado(a)" itemLabel="Casado(a)"/>
                                                                <f:selectItem itemValue="Divorciado(a)" itemLabel="Divorciado(a)"/>
                                                                <f:selectItem itemValue="Viuvo(a)" itemLabel="Viúvo(a)"/>
                                                                <f:selectItem itemValue="Amasiado(a)" itemLabel="Amasiado(a)"/>
                                                                <f:selectItem itemValue="Desquitado(a)" itemLabel="Desquitado(a)"/>
                                                                <f:selectItem itemValue="Separado(a)" itemLabel="Separado(a)"/>
                                                                <f:selectItem itemValue="Indefinido" itemLabel="Indefinido"/>
                                                            </p:selectOneMenu>
                                                        </h:column>

                                                        <h:column>
                                                            <p:outputLabel value="Naturalidade" /><br />                                                
                                                            <p:commandButton  icon="ui-icon-search" value="#{sociosBean.novoDependente.naturalidade}" action="#{chamadaPaginaBean.cidade}" title="Pesquisar outra Naturalidade" style="margin-right: 10px"/>
                                                        </h:column>
                                                    </h:panelGrid>

                                                    <h:panelGrid columns="1">
                                                        <h:outputLabel value="Nome do  Pai" />
                                                        <p:inputText maxlength="100" value="#{sociosBean.novoDependente.pai}" converter="#{toUpperCase}" style="width: 460px">
                                                            <f:ajax event="blur" render="@this" />
                                                        </p:inputText>           

                                                        <h:outputLabel value="Nome da Mãe" />
                                                        <p:inputText maxlength="100" value="#{sociosBean.novoDependente.mae}" converter="#{toUpperCase}" style="width: 460px">
                                                            <f:ajax event="blur" render="@this" />
                                                        </p:inputText>                                
                                                    </h:panelGrid>
                                                </p:column>

                                                <p:column>
                                                    <p:panel header="Foto do Perfil" style="width: 265px; text-align: center" id="i_panel_foto">
                                                        <h:column rendered="#{not empty sociosBean.novoDependente.pessoa.foto}">
                                                            <p:graphicImage name="#{sociosBean.novoDependente.pessoa.foto}" cache="false" style="max-width: 250px; max-height: 395px" />
                                                        </h:column>
                                                    </p:panel>                                                
                                                    <h:panelGrid columns="4">
                                                        <p:commandButton icon="photocam" value="Capturar Foto" title="Capturar Foto" action="#{photoCapture.openAndSave(sociosBean.novoDependente, ':formSocios:i_panel_dados')}" global="false" disabled="#{sociosBean.novoDependente.id == -1 or controleAcessoBean.verificarPermissao('libera_camera', 1)}"/>
                                                        <p:commandButton icon="ui-icon-arrowthick-1-n" value="Upload Foto" title="Enviar Foto" action="#{photoUpload.openAndSave(sociosBean.novoDependente, ':formSocios:i_panel_dados')}" disabled="#{sociosBean.novoDependente.id == -1 or controleAcessoBean.verificarPermissao('libera_upload', 1)}" />
                                                        <p:commandButton icon="ui-icon-scissors" value="Cortar Foto" title="Cortar Foto" action="#{photoCropper.openAndSave(sociosBean.novoDependente, ':formSocios:i_panel_dados')}" global="false" disabled="#{sociosBean.novoDependente.id == -1 or (sociosBean.novoDependente.pessoa.fotoResource eq 'images/user_male.png' or sociosBean.novoDependente.pessoa.fotoResource eq 'images/user_female.png')}"/>
                                                        <p:commandButton icon="ui-icon-trash" title="Remover Foto" action="#{sociosBean.apagarImagem()}" rendered="#{not empty sociosBean.novoDependente.pessoa.foto}" update=":formSocios:i_panel_dados"  disabled="#{sociosBean.novoDependente.id == -1}"/>
                                                    </h:panelGrid>
                                                </p:column>
                                            </h:panelGrid>

                                            <h:panelGrid columns="3">
                                                <p:commandButton value="Salvar e Adicionar" action="#{sociosBean.saveFisicaDependente}" update=":formSocios:i_panel_dados :formSocios:i_panel_dependente i_panel_foto"/>
                                                <p:commandButton value="Novo" action="#{sociosBean.novoCadastroDependente}" update=":formSocios:i_panel_dados i_panel_pesquisa"/>
                                                <p:commandButton value="Cancelar" onclick="PF('dlg_dependente').hide()"/>
                                            </h:panelGrid>
                                        </p:tab>


                                        <p:tab id="tab_pesquisa" title="Pesquisa"  disabled="#{sociosBean.novoDependente.pessoa.id != -1}">
                                            <p:messages id="i_msg2" showDetail="true" closable="true" />   
                                            <h:panelGrid id="i_panel_pesquisa" columns="1" style="width: 400px">
                                                <h:outputLabel value="Pesquisar" />
                                                <p:autoComplete value="#{sociosBean.fisicaPesquisa}" completeMethod="#{sociosBean.listaPesquisaDependente}" size="100" scrollHeight="300" disabled="#{sociosBean.novoDependente.id != -1}"
                                                                var="fisica" itemLabel="#{fisica.detalhes}" itemValue="#{fisica}" converter="fisicaConverter" forceSelection="true" queryDelay="1000" maxlength="100" minQueryLength="1">
                                                    <p:ajax event="itemSelect" listener="#{sociosBean.selectDependente()}" update="i_panel_pesquisa :formSocios:i_panel_dados"/>
                                                </p:autoComplete>

                                                <p:panel styleClass="fundoCinza" rendered="#{sociosBean.fisicaPesquisa.id != -1}" style="margin-top: 20px">
                                                    <h:panelGrid columns="4" style="width: 200px">
                                                        <p:column>
                                                            <h:outputLabel value="Cadastrado"/><br />
                                                            <p:inputText value="#{sociosBean.fisicaPesquisa.pessoa.criacao}" readonly="true" size="8" />
                                                        </p:column>

                                                        <p:column>
                                                            <h:outputLabel value="CPF" style="margin-left: 10px"/><br />
                                                            <p:inputText size="13" value="#{sociosBean.fisicaPesquisa.pessoa.documento}" readonly="true" style="margin-left: 10px"/>
                                                        </p:column>

                                                        <p:column>
                                                            <h:outputLabel value="RG" style="margin-left: 10px"/><br />
                                                            <p:inputText size="12" maxlength="10" value="#{sociosBean.fisicaPesquisa.rg}" readonly="true" style="margin-left: 10px"/>
                                                        </p:column>

                                                        <p:column>
                                                            <h:outputLabel value="Nascimento" style="margin-left: 10px"/><br />
                                                            <p:inputText size="8" value="#{sociosBean.fisicaPesquisa.nascimento}" readonly="true" style="margin-left: 10px"/>
                                                        </p:column>
                                                    </h:panelGrid>
                                                </p:panel>
                                                <p:commandButton value="Adicionar" action="#{sociosBean.saveFisicaDependente}" update=":formSocios:i_panel_dados :formSocios:i_panel_dependente i_msg2" rendered="#{sociosBean.fisicaPesquisa.id != -1}" />
                                            </h:panelGrid>

                                        </p:tab>
                                    </p:tabView>
                                </h:panelGrid>
                            </p:dialog>

                            <p:dialog widgetVar="dlg_sugestoes" modal="true" resizable="false" height="250" width="1024" header="Existem cadastros com mesmo nome">
                                <h:panelGroup id="i_sugestoes" layout="block">
                                    <p:dataTable value="#{sociosBean.listFisicaSugestao}" var="fisicaSugestao" emptyMessage="Nenhum registro encontrado" scrollHeight="200" scrollable="true" paginator="true" rows="100">
                                        <p:ajax event="rowToggle" listener="#{sociosBean.listenerSubSocios(fisicaSugestao.pessoa.id)}" />
                                        <p:column style="width:5%">  
                                            <p:rowToggler />  
                                        </p:column>
                                        <p:column headerText="Nome">
                                            <p:commandLink action="#{sociosBean.useFisicaSugestao(fisicaSugestao)}" update=":formSocios:" value="#{fisicaSugestao.pessoa.nome}" title="#{fisicaSugestao.pessoa.id}"/>
                                        </p:column>
                                        <p:column headerText="RG" width="80"  styleClass="text-center">
                                            <p:commandLink action="#{sociosBean.useFisicaSugestao(fisicaSugestao)}" update=":formSocios:" value="#{fisicaSugestao.rg}"/>
                                        </p:column>

                                        <p:column headerText="CPF" width="100"  styleClass="text-center">
                                            <p:commandLink action="#{sociosBean.useFisicaSugestao(fisicaSugestao)}" update=":formSocios:" value="#{fisicaSugestao.pessoa.documento}"/>
                                        </p:column>                            

                                        <p:column headerText="E-mail">
                                            <h:outputText value="#{fisicaSugestao.pessoa.email1}"/>
                                        </p:column>

                                        <p:column headerText="Telefone" width="100" styleClass="text-center">
                                            <h:outputText value="#{fisicaSugestao.pessoa.telefone1}"/>
                                        </p:column>

                                        <p:rowExpansion>
                                            <h:panelGrid columns="5" style="height: 40px" styleClass="sbb">
                                                <p:column>
                                                    <h:outputText value="CÓDIGO" style="font-weight: bold"/><br />
                                                    <h:outputText value="#{fisicaSugestao.pessoa.id}"/>
                                                </p:column>
                                                <p:column>
                                                    <h:outputText value="Dt Nascimento" style="font-weight: bold"/><br />
                                                    <h:outputText value="#{fisicaSugestao.nascimento}"/>
                                                </p:column>
                                                <p:column>
                                                    <h:outputText value="Local de trabalho" style="font-weight: bold"/><br />
                                                    <h:outputText value="#{fisicaBean.pessoaEmpresaString(fisicaSugestao)}"/>
                                                </p:column>
                                                <p:column>
                                                    <h:outputText value="Pessoa cadastrada em oposição!" style="font-weight: bold; color: red;" rendered="#{sociosBean.existePessoaOposicaoPorDocumento(fisicaSugestao.pessoa.documento)}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:commandButton icon="ui-icon-contact" update=":formSocios:i_pessoa_fisica_card" onclick="PF('dlg_pessoa_fisica_card').show()" action="#{pessoaCardBean.cardFisica(fisicaSugestao.pessoa.id)}" title="Ver detalhes" />
                                                </p:column>
                                            </h:panelGrid>
                                            <h:panelGrid style="height: 40px" styleClass="sbb">
                                                <h:outputLabel value="Endereço: #{fisicaSugestao.pessoa.pessoaEndereco.enderecoCompletoString} " styleClass="bold font-color-red"/>
                                            </h:panelGrid>
                                            <p:panel header="Titular / Dependente(s) - Matrícula: #{fisicaSugestao.pessoa.socios.matriculaSocios.nrMatricula} - Categoria: #{fisicaSugestao.pessoa.socios.matriculaSocios.categoria.categoria}" rendered="#{not empty sociosBean.listSubSocios}">
                                                <p:dataTable value="#{sociosBean.listSubSocios}" var="dependentes">
                                                    <p:column headerText="Nome">                                                
                                                        <p:commandLink action="#{sociosBean.useFisicaSugestao(dependentes.servicoPessoa.pessoa.fisica)}" value="#{dependentes.servicoPessoa.pessoa.nome}" title="Editar pessoa" styleClass="#{dependentes.parentesco.parentesco eq 'TITULAR' ? 'font-color-red bold' : ''}"/>
                                                    </p:column>
                                                    <p:column headerText="Parentesco" styleClass="#{dependentes.parentesco.parentesco eq 'TITULAR' ? 'font-color-red bold' : ''}">
                                                        #{dependentes.parentesco.parentesco}
                                                    </p:column>
                                                    <p:column width="30">
                                                        <p:commandButton icon="ui-icon-contact" update=":formSocios:i_pessoa_fisica_card" onclick="PF('dlg_pessoa_fisica_card').show()" action="#{pessoaCardBean.cardFisica(dependentes.servicoPessoa.pessoa.id)}" title="Ver detalhes" />
                                                    </p:column>
                                                </p:dataTable>                                            
                                            </p:panel>
                                            <h:column>
                                                <p:panel rendered="#{empty sociosBean.listSubSocios}">
                                                    <p:outputLabel value="NÃO SÓCIO" styleClass="bold font-color-red" style="font-size: 16pt!important"/>
                                                </p:panel>
                                            </h:column>                                            
                                        </p:rowExpansion>
                                    </p:dataTable>                                    
                                </h:panelGroup>
                                <f:facet name="footer">
                                    <h:panelGrid columns="2">
                                        <p:commandButton value="Fechar" title="Fechar" onclick="PF('dlg_sugestoes').hide();"  />
                                    </h:panelGrid>
                                </f:facet>
                            </p:dialog>
                            <p:dialog widgetVar="dlg_pessoa_fisica_card" modal="true" resizable="false" height="400" width="400" header="Detalhes">
                                <p:ajax event="close" listener="#{pessoaCardBean.close}"/>  
                                <p:panel id="i_pessoa_fisica_card">
                                    <ui:include src="templates/templatePessoaFisicaCard.xhtml" />
                                </p:panel>
                            </p:dialog> 

                        </h:form>
                    </p:panel>

                    <h:form id="form_desconto">
                        <p:dialog widgetVar="dlg_desconto" modal="true" header="Salvar Desconto" resizable="false"  width="400">
                            <h:panelGrid id="i_panel_desconto">
                                <p:messages closable="true" autoUpdate="false" showDetail="true" />
                                <p:outputLabel value="Deseja SALVAR esse desconto para a categoria #{sociosBean.novoDescontoSocial.categoria.categoria}" style="font-size: 11pt!important; font-weight: bold"/>
                                <h:panelGrid id="i_panel_valores_novo_desconto" columns="3">
                                    <h:column>
                                        <p:outputLabel value="Valor" style="font-size: 11pt!important"/><br />
                                        <p:inputText value="#{sociosBean.novoValorServico}" style="width: 100px">
                                            <p:ajax event="blur" update="i_panel_valores_novo_desconto" global="false" listener="#{sociosBean.calculoNovoDesconto()}"/>
                                        </p:inputText>
                                    </h:column>

                                    <h:column>
                                        <p:outputLabel value="Desconto" style="font-size: 11pt!important"/><br />
                                        <p:inputText value="#{sociosBean.novoDescontoSocial.nrDescontoString}" style="width: 80px">
                                            <p:ajax event="blur" update="i_panel_valores_novo_desconto" global="false" listener="#{sociosBean.calculoNovoValor()}"/>
                                        </p:inputText>
                                    </h:column>

                                    <h:column>
                                        <p:outputLabel value="Nome do Desconto" style="font-size: 11pt!important"/><br />
                                        <p:inputText value="#{sociosBean.novoDescontoSocial.descricao}">
                                            <p:ajax event="change" update="@this" global="false"/>
                                        </p:inputText>
                                    </h:column>
                                </h:panelGrid>

                            </h:panelGrid>
                            <f:facet name="footer">
                                <p:commandButton value="Salvar" action="#{sociosBean.salvarDesconto()}" icon="ui-icon-check"/>                                
                            </f:facet>
                        </p:dialog>

                        <p:dialog widgetVar="dlg_alterar_desconto" modal="true" header="Alterar Desconto" resizable="false"  width="400">
                            <h:panelGrid id="i_panel_alterar_desconto">
                                <p:outputLabel value="Deseja ALTERAR esse desconto?" style="font-size: 11pt!important; font-weight: bold"/>
                                <h:panelGrid id="i_panel_valores_alterar_desconto" columns="3">
                                    <h:column>
                                        <p:outputLabel value="Valor" style="font-size: 11pt!important"/><br />
                                        <p:inputText value="#{sociosBean.alteraValorServico}" style="width: 100px">
                                            <p:ajax event="blur" update="i_panel_valores_alterar_desconto" global="false" listener="#{sociosBean.calculoAlterarDesconto()}"/>
                                        </p:inputText>
                                    </h:column>

                                    <h:column>
                                        <p:outputLabel value="Desconto" style="font-size: 11pt!important"/><br />
                                        <p:inputText value="#{sociosBean.descontoSocial.nrDescontoString}" style="width: 80px">
                                            <p:ajax event="blur" update="i_panel_valores_alterar_desconto" global="false" listener="#{sociosBean.calculoAlterarValor()}"/>
                                        </p:inputText>
                                    </h:column>

                                    <h:column>
                                        <p:outputLabel value="Nome do Desconto" style="font-size: 11pt!important"/><br />
                                        <p:inputText value="#{sociosBean.descontoSocial.descricao}">
                                            <p:ajax event="change" update="@this" global="false"/>
                                        </p:inputText>
                                    </h:column>
                                </h:panelGrid>

                                <p:commandButton value="Salvar" action="#{sociosBean.alterarDesconto()}" icon="ui-icon-check"/>
                            </h:panelGrid>
                        </p:dialog>
                    </h:form>

                </f:view>
                <!-- FINALIZA div wrap main -->
            </div>
        </div>
        <!-- FINALIZA div wrap main -->

        <div id="footerx">
            <f:subview id="footer">
                <ui:include src="templates/templateFooter.xhtml"/>
            </f:subview>
        </div>                
    </h:body>
</ui:composition>
