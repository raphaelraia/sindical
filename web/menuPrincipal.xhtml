<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Sindical - Menu Principal</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" charset="UTF-8"/>
        <link rel="shortcut icon" href="#{facesContext.externalContext.requestContextPath}/Imagens/favicon.ico"/>  
        <style type="text/css">
            .ui-widget-content .ui-inputfield{ padding: 8px!important;} 
            .ui-button { padding: 3px!important; }
            .ui-selectonemenu-label .ui-inputfield{}

            .column01{
                width: 15%;
                vertical-align: top;
            }

            .column02{
                width: 65%;
                vertical-align: top;
            }

            .column03{
                width: 20%;
                vertical-align: top;
            }
            
        </style>
    </h:head>
    <h:body>
        <!-- INICIA DIV wrap e main -->
        <div id="wrapx">
            <div id="mainx">
                <!-- INICIA DIV wrap e main -->  
                <f:subview id="header">
                    <ui:include src="templates/templatePrime.xhtml"/>
                </f:subview>


                <f:view>
                    <f:metadata>  
                        <f:event type="preRenderView" listener="#{processoAutomaticoBean.find_progress('atualizar_juridica')}" />
                        <f:event type="preRenderView" listener="#{processoAutomaticoBean.find_progress('registrar_boleto')}" />
                        <!-- 
                        também funciona para este caso
                        <f:viewAction action="# {processoAutomaticoBean.find_progress('atualizar_juridica')}" /> 
                        
                        ex. retirado daqui
                        http://stackoverflow.com/questions/14153895/view-scoped-bean-prerenderview-method-being-called-multiple-times
                        -->
                    </f:metadata>

                    <h:form id="formMenuPrincipal">
                        <p:panel style="border: 0px; margin: 0 auto; width: #{configuracaoBean.resolucao.tipoResolucao.tamanho}">
                            <p:menubar>
                                <p:submenu label="Segurança" icon="ui-icon-document" style="margin-right: 15px">
                                    <p:menuitem value="Usuários" action="#{chamadaPaginaBean.pagina('usuario')}" />  
                                    <p:submenu label="Manutenção" icon="ui-icon-contact">  
                                        <p:menuitem value="Perm. Departamento"      action="#{chamadaPaginaBean.permissaoDepartamento}" />
                                        <p:menuitem value="Módulo/Rotina"           action="#{chamadaPaginaBean.pagina('permissao')}"  />
                                        <p:menuitem value="Cadastro Simples"        action="#{chamadaPaginaBean.simples}" />
                                        <p:menuitem value="Rotina"                  action="#{chamadaPaginaBean.rotina}" />
                                        <p:menuitem value="Níveis"                  action="#{chamadaPaginaBean.nivel}" />
                                        <p:menuitem value="Filial Departamento"     action="#{chamadaPaginaBean.pagina('filialDepartamento')}" />
                                        <p:menuitem value="Filial Rotina"           action="#{chamadaPaginaBean.pagina('filialRotina')}" />
                                        <p:menuitem value="Permissão Catraca"       action="#{chamadaPaginaBean.pagina('permissaoCatraca')}" />
                                        <p:menuitem value="Cadastro Depto"          action="#{chamadaPaginaBean.paginaSimples('Departamento', 'Departamento')}" />
                                    </p:submenu>  
                                    <p:submenu label="Departamentos">  
                                        <p:menuitem value="Manutenção"  action="#{chamadaPaginaBean.pagina('configuracaoDepartamento')}"/>
                                        <p:menuitem value="Homologação" action="#{chamadaPaginaBean.pagina('configuracaoHomologacao')}" />
                                        <p:menuitem value="Social"      action="#{chamadaPaginaBean.pagina('configuracaoSocial')}"      />
                                        <p:menuitem value="Financeiro"  action="#{chamadaPaginaBean.pagina('configuracaoFinanceiro')}"  />
                                        <p:menuitem value="Arrecadação" action="#{chamadaPaginaBean.pagina('configuracaoArrecadacao')}" />
                                        <p:menuitem value="Locadora"    action="#{chamadaPaginaBean.pagina('configuracaoLocadora')}"    />
                                    </p:submenu>  
                                    <p:separator />  
                                    <p:submenu label="Sistema">
                                        <p:menuitem value="Autorização"             action="#{chamadaPaginaBean.pagina('sisAutorizacoes')}" />
                                        <p:menuitem value="Notificações"            action="#{chamadaPaginaBean.pagina('sisNotificacao')}" rendered="#{segurancaUtilitariosBean.sessaoUsuario.id == 1}"/>
                                        <p:menuitem value="Configurações"           action="#{chamadaPaginaBean.pagina('configuracao')}" rendered="#{controleUsuarioBean.clienteString eq 'Rtools'}"/>
                                        <p:menuitem value="Dispositivos"            action="#{chamadaPaginaBean.pagina('dispositivo')}" rendered="#{segurancaUtilitariosBean.sessaoUsuario.id == 1}"/>                                        
                                        <p:submenu label="Implantação">
                                            <p:menuitem value="Importação"              action="#{chamadaPaginaBean.pagina('importacao')}" />                                            
                                        </p:submenu>
                                        <p:submenu label="Banco de Dados" rendered="#{segurancaUtilitariosBean.sessaoUsuario.id == 1}">
                                            <p:menuitem value="Atualizar Base"          action="#{chamadaPaginaBean.pagina('atualizarBase')}" rendered="#{controleUsuarioBean.clienteString eq 'Rtools'}" />
                                            <p:menuitem value="PgStatActivity"          action="#{chamadaPaginaBean.pagina('pgStatActivity')}" />
                                        </p:submenu>
                                        <p:submenu label="Avançado" >
                                            <p:menuitem value="Logs"                    action="#{chamadaPaginaBean.pagina('pesquisaLog')}" title="Registro de atividades"  />
                                            <p:menuitem value="Controle de Scripts"     action="#{chamadaPaginaBean.pagina('controleScripts')}" rendered="#{controleUsuarioBean.clienteString eq 'Rtools' and segurancaUtilitariosBean.sessaoUsuario.id == 1}"/>
                                            <p:menuitem value="Processos"               action="#{chamadaPaginaBean.pagina('sisProcesso')}" rendered="#{segurancaUtilitariosBean.sessaoUsuario.id == 1}"/>
                                            <p:menuitem value="Histórico de Acessos"    action="#{chamadaPaginaBean.pagina('usuarioHistoricoAcesso')}" />
                                            <p:menuitem value="Histórico de Acessos"    action="#{chamadaPaginaBean.pagina('historicoAcessos')}" rendered="false"/>
                                        </p:submenu>
                                        <p:submenu label="Experimental" rendered="false">
                                            <p:menuitem value="Canvas"                  action="#{chamadaPaginaBean.pagina('canvas')}" rendered="#{segurancaUtilitariosBean.sessaoUsuario.id == 1}"/>
                                        </p:submenu>
                                        <p:submenu label="Suporte">
                                            <p:menuitem value="Notificações Categoria"  action="#{chamadaPaginaBean.paginaSimples('SisNotificacaoCategoria', 'Notificação Categoria')}" rendered="#{segurancaUtilitariosBean.sessaoUsuario.id == 1}"/>                                            
                                        </p:submenu>
                                    </p:submenu>
                                    <p:submenu label="Ordem Serviço" rendered="false">
                                        <p:menuitem value="Ordem Serviço" />
                                        <p:menuitem value="Prioridade" />
                                        <p:menuitem value="Status" />                                            
                                    </p:submenu>
                                    <p:menuitem value="Sair do Sistema" action="#{usuarioBean.sairSistema}" /> 
                                </p:submenu>
                                <p:submenu label="Departamentos" icon="ui-icon-document" style="margin-right: 15px">
                                    <p:menuitem value="Social"      action="#{chamadaPaginaBean.menuSocial}" />
                                    <p:menuitem value="Arrecadação" action="#{chamadaPaginaBean.menuArrecadacao}" actionListener="#{bloqueioRotinaBean.liberaRotinasBloqueadas}"/>
                                    <p:menuitem value="Financeiro"  action="#{chamadaPaginaBean.menuFinanceiro}" />
                                    <p:menuitem value="Homologação" action="#{chamadaPaginaBean.menuHomologacao}" actionListener="#{agendamentoBean.verificaNaoAtendidos}"/>
                                    <p:menuitem value="Academia"    action="#{chamadaPaginaBean.menuAcademia}" />
                                    <p:menuitem value="Escola"      action="#{chamadaPaginaBean.menuEscola}" />
                                    <p:menuitem value="Clube"       action="#{chamadaPaginaBean.menuClube}" />
                                    <p:menuitem value="Locadora"    action="#{chamadaPaginaBean.menuLocadora}" />
                                    <p:menuitem value="Atendimento" action="#{chamadaPaginaBean.menuAtendimento}" />
                                    <p:menuitem value="Cobrança"  action="#{chamadaPaginaBean.menuCobranca}" />
                                </p:submenu>
                                <p:submenu label="Sindicato" icon="ui-icon-document" style="margin-right: 15px">  
                                    <p:menuitem value="Registro Empresarial" action="#{chamadaPaginaBean.registroEmpresarial}" actionListener="#{registroEmpresarialBean.limparModulo()}"/>
                                    <p:menuitem value="Registro Filial"      action="#{chamadaPaginaBean.pagina('macFilial')}" />
                                    <p:menuitem value="Filial"               action="#{chamadaPaginaBean.pagina('filial')}" title="Especificar cidades da Filial após cadastrar"/>
                                    <p:menuitem value="Web Service - CNPJ"  action="#{chamadaPaginaBean.pagina('configuracaoCnpj')}" />
                                    <p:menuitem value="Registro Patronal"    action="#{chamadaPaginaBean.pagina('registroPatronal')}" />
                                    <p:menuitem value="Piso Salarial"        action="#{chamadaPaginaBean.pagina('pisoSalarial')}" />
                                </p:submenu>
                                <p:submenu label="Suporte" icon="ui-icon-document" style="margin-right: 15px">
                                    <p:menuitem value="Manual do Sistema" />
                                    <p:menuitem value="Envie sua Mensagem" />
                                </p:submenu>
                                <p:submenu label="Ferramentas" icon="ui-icon-document" style="margin-right: 15px">  
                                    <p:submenu label="Pessoa" icon="ui-icon-contact">
                                        <p:menuitem value="Física"                action="#{chamadaPaginaBean.pessoaFisica}"/>
                                        <p:menuitem value="Juridica"              action="#{chamadaPaginaBean.pessoaJuridica}"/>
                                        <p:menuitem value="Tipo Documento"        action="#{chamadaPaginaBean.tipoDocumento}"/>
                                        <p:menuitem value="Cnae"                  action="#{chamadaPaginaBean.pagina('cnae')}"/>
                                        <p:menuitem value="Profissão"             action="#{chamadaPaginaBean.pagina('profissao')}"/>
                                        <p:menuitem value="Enviar E-Mails"        action="#{chamadaPaginaBean.enviarEmail}" rendered="false"/>
                                        <p:submenu label="Suporte">
                                            <p:menuitem value="Física (Mesclar)"      action="#{chamadaPaginaBean.pagina('pessoaFisicaMesclar')}" rendered="#{segurancaUtilitariosBean.sessaoUsuario.id == 1}" title="MESCLAR CADASTROS"/>
                                            <p:menuitem value="Jurídica (Mesclar)"    action="#{chamadaPaginaBean.pagina('pessoaJuridicaMesclar')}" rendered="#{segurancaUtilitariosBean.sessaoUsuario.id == 1}" title="MESCLAR CADASTROS" />
                                            <p:menuitem value="Nacionalidade"   action="#{chamadaPaginaBean.paginaSimples('Nacionalidade', 'Nacionalidade')}"/>
                                        </p:submenu>
                                        <p:menuitem value="Mala Direta Grupo"   action="#{chamadaPaginaBean.paginaSimples('MalaDiretaGrupo', 'Mala Direta Grupo')}"/>
                                    </p:submenu>
                                    <p:submenu label="Endereço" icon="ui-icon-contact" style="margin-right: 15px">
                                        <p:menuitem value="Endereço"      action="#{chamadaPaginaBean.endereco}"/>
                                        <p:menuitem value="Bairro"        action="#{chamadaPaginaBean.paginaSimples('Bairro', 'Bairro')}"/>
                                        <p:menuitem value="Cidade"        action="#{chamadaPaginaBean.cidade}"/>
                                        <p:menuitem value="Logradouro"    action="#{chamadaPaginaBean.paginaSimples('Logradouro', 'Logradouro')}"/>
                                        <p:menuitem value="Descrição"     action="#{chamadaPaginaBean.paginaSimples('DescricaoEndereco', 'Descrição Endereço')}"/>
                                        <p:menuitem value="Tipo Endereço" action="#{chamadaPaginaBean.paginaSimples('TipoEndereco', 'Tipo Endereço')}"/>
                                    </p:submenu>
                                    <p:submenu label="Agenda" icon="ui-icon-document">
                                        <p:menuitem value="Agenda Telefônica"        action="#{chamadaPaginaBean.pagina('agendaTelefone')}" actionListener="#{agendaTelefoneBean.putType('agendaTelefone')}" title="Cadastro"/>
                                        <p:menuitem value="Grupo Agenda"             action="#{chamadaPaginaBean.grupoAgenda}" />
                                        <p:menuitem value="Grupo Usuário"            action="#{chamadaPaginaBean.pagina('agendaGrupoUsuario')}" />
                                        <p:menuitem value="Etiquetas"                action="#{chamadaPaginaBean.pagina('relatorioAgendaTelefonica')}" />
                                        <p:menuitem value="Compromisso"              action="#{chamadaPaginaBean.pagina('compromisso')}" />
                                        <p:menuitem value="Secretaria"               action="#{chamadaPaginaBean.pagina('secretaria')}" />
                                        <p:menuitem value="Categoria de Compromisso" action="#{chamadaPaginaBean.paginaSimples('CompromissoCategoria', 'Categoria de Compromisso')}"/>
                                    </p:submenu>
                                    <p:menuitem icon="ui-icon ui-icon-mail-closed" value="Email" action="#{chamadaPaginaBean.pagina('email')}" />
                                    <p:submenu label="Relatórios" icon="ui-icon-document">
                                        <p:menuitem value="Manutenção" action="#{chamadaPaginaBean.relatorio}"/>
                                        <p:menuitem value="Etiquetas" action="#{chamadaPaginaBean.pagina('etiquetas', 'sisEtiquetas')}"/>
                                        <p:menuitem value="Cartas"                   action="#{chamadaPaginaBean.pagina('sisCarta')}" />
                                    </p:submenu>
                                </p:submenu>
                            </p:menubar> 

                            <h:outputLabel value="O Sindical está mudando pra você..." style="font-size: 25pt!important; float: left;  font-family: 'Cordia New'" rendered="false"/>

                            <h:panelGrid columns="3" columnClasses="column01, column02, column03" style="width: 100%">
                                <p:column>
                                    <p:panel>
                                        <center>
                                            <h:panelGrid>
                                                <h:outputText style="font-weight: bold" value="Agenda Telefônica" />
                                            </h:panelGrid>

                                            <p:commandLink action="#{chamadaPaginaBean.pagina('pesquisaAgendaTelefone','agendaTelefone')}" title="Pesquisa Agenda Telefônica" style="clear: both" actionListener="#{agendaTelefoneBean.putType('pesquisaAgendaTelefone')}">
                                                <h:graphicImage value="/Imagens/-icone-agenda-telefone.jpg" width="120" /><br />
                                            </p:commandLink>
                                            <h:column rendered="#{agendaNotificaoBean.listAniversariantes.size() > 0}">
                                                <p:commandLink onclick="PF('dlg_agenda_contato').show();">
                                                    Aniversariantes do mês
                                                    <h:graphicImage value="/Imagens/icon-birthday.png" width="16" /><br />
                                                </p:commandLink>
                                            </h:column>
                                        </center>
                                    </p:panel>
                                </p:column>

                                <p:column>
                                    <p:panel rendered="#{not empty sisAutorizacoesBean.listSisAutorizacoes and !controleAcessoBean.verificarPermissao('autorizar', 3)}">
                                        <f:facet name="header">
                                            <p:outputLabel value="ATUALIZAÇÃO DE CADASTRO SOLICITADA" style="font-size: 12pt; color: #dd3b58; font-weight: bold" />
                                        </f:facet>
                                        <p:commandLink value="Clique para visualizar" action="#{chamadaPaginaBean.pagina('sisAutorizacoes')}" style="font-size: 11pt!important"/>
                                    </p:panel>

                                    <p:panel rendered="#{not empty sisNotificacaoView.listNotificacao}">
                                        <f:facet name="header">
                                            <p:outputLabel value="NOTIFICAÇÕES DO SISTEMA" style="font-size: 12pt; color: #dd3b58; font-weight: bold" />
                                        </f:facet>
                                        <p:dataTable value="#{sisNotificacaoView.listNotificacao}" var="sNotificacao">
                                            <p:column headerText="Motivo" width="120" styleClass="text-center">
                                                <p:outputLabel value="#{sNotificacao.categoria}" style="color: #{sNotificacao.destaque ? 'blue' : 'black'}" />
                                            </p:column>
                                            <p:column>
                                                <h:outputText escape="false" value="#{sNotificacao.observacao}" style="border: 0; width: 100%; " />
                                            </p:column>
                                            <p:column width="30" styleClass="text-center">
                                                <p:commandButton icon="ui-icon-star" rendered="#{sNotificacao.destaque}" />                                                                 
                                            </p:column>
                                        </p:dataTable>
                                    </p:panel>

                                    <p:panel rendered="#{not empty sisNotificacaoView.listaNotificacaoServico}">
                                        <f:facet name="header">
                                            <h:panelGrid style="width: 100%; text-align: center" columns="2">
                                                <span class="ui-icon ui-icon-alert" style="color: red"/>
                                                <p:outputLabel value="EXISTEM SERVIÇOS QUE NÃO FORAM QUITADOS" style="font-size: 13pt!important; color: #dd3b58; font-weight: bold"></p:outputLabel>
                                            </h:panelGrid>
                                        </f:facet>
                                        
                                        <br />
                                        <h:panelGrid style="width: 100%; text-align: center">
                                            <p:commandButton value="CLIQUE AQUI PARA VISUALIZAR LISTA" onclick="PF('dlg_notificacao_servico').show()" icon="ui-icon-alert"/>
                                        </h:panelGrid>
                                        <br />
                                        
                                        <p:dialog widgetVar="dlg_notificacao_servico" modal="true" header="LISTA DE SERVIÇOS" width="800" height="400" resizable="false">
                                            <h:panelGrid style="width: 100%">
                                                <p:commandButton value="Imprimir Relatório" icon="ui-icon-print" action="#{sisNotificacaoView.imprimirNotificacaoServico}" ajax="false" style="float: right"/>
                                            </h:panelGrid>
                                            <br />
                                            <p:dataTable value="#{sisNotificacaoView.listaNotificacaoServico}" var="linha_notificacao_servico">
                                                <p:column headerText="Nome">#{linha_notificacao_servico.nome}</p:column>
                                                <p:column headerText="Serviço">#{linha_notificacao_servico.servico}</p:column>
                                                <p:column headerText="Vencto" style="width: 80px; text-align: center">#{linha_notificacao_servico.vencimentoString}</p:column>
                                                <p:column headerText="Valor R$" style="width: 80px; text-align: right">#{linha_notificacao_servico.valorString}</p:column>
                                            </p:dataTable> 
                                        </p:dialog>
                                    </p:panel>                                    

                                    <p:panel style="height: 50px" styleClass="margin-top-max" rendered="#{notificacaoBean.habilitaNot}">
                                        <h:panelGrid id="i_panel_poll" style="float: left">
                                            <h:outputLabel value="Existem #{notificacaoBean.quantidadeMenu} notificações de cobrança para serem enviadas" rendered="#{notificacaoBean.habilitaNot}" styleClass="fonteExtratoTela" style="font-size: 12pt; color: #dd3b58; font-weight: bold"/>
                                            <br />
                                            <p:commandLink value="Clique aqui para enviar" action="#{notificacaoBean.enviarPeloMenu()}" rendered="#{notificacaoBean.habilitaNot}" styleClass="fontePadrao"/>
                                        </h:panelGrid>
                                    </p:panel>
                                    <br />
                                    <p:panel style="height: 80px" rendered="#{!emissaoGuiasBean.listHistoricoEmissaoGuias.isEmpty()}">
                                        <h:panelGrid  style="float: left">
                                            <h:outputLabel value="Existem guias geradas sem baixar" style="font-size: 12pt; color: #dd3b58; font-weight: bold"/>
                                            <br />
                                            <p:commandLink value="CLIQUE AQUI PARA BAIXAR OU EXCLUIR" onclick="PF('i_dlg_guias').show()"/>
                                        </h:panelGrid>
                                    </p:panel>
                                    <p:panel styleClass="margin-top-max" id="id_lista" header="Agenda de Compromissos" rendered="#{!controleAcessoBean.verificarPermissao('consulta_agenda_compromissos', 4)}">
                                        <h:panelGrid columns="15">
                                            <p:outputLabel value="Status: "/>
                                            <p:selectOneMenu label="Cancelados" value="#{compromissoUsuarioBean.cancelados}">
                                                <p:ajax event="change" global="false" update="@this :formMenuPrincipal:id_lista" listener="#{compromissoUsuarioBean.listener('reload_tipos')}"/>
                                                <f:selectItem itemValue="todos" itemLabel="Todos" />
                                                <f:selectItem itemValue="ativos" itemLabel="Ativos" />
                                                <f:selectItem itemValue="cancelados" itemLabel="Cancelados" />
                                            </p:selectOneMenu>
                                            <h:column>
                                                <h:panelGroup layout="block">
                                                    <p:selectOneMenu label="Histórico" value="#{compromissoUsuarioBean.tipoHistorico}"  styleClass="margin-left-max">
                                                        <p:ajax event="change" global="false" update="@this :formMenuPrincipal:id_lista" />
                                                        <f:selectItem itemValue="hoje" itemLabel="Hoje" />
                                                        <f:selectItem itemValue="hoje_amanha" itemLabel="Hoje e Amanhã" />
                                                        <f:selectItem itemValue="agendados" itemLabel="Agendados" itemDisabled="#{compromissoUsuarioBean.cancelados eq 'cancelados'}"/>
                                                        <f:selectItem itemValue="permanentes" itemLabel="Permanentes" />
                                                        <f:selectItem itemValue="essa_semana" itemLabel="Essa semana" />
                                                        <f:selectItem itemValue="semana_que_vem" itemLabel="Próxima semana" />
                                                        <f:selectItem itemValue="ontem" itemLabel="Ontem" />
                                                        <f:selectItem itemValue="mes" itemLabel="Ultimos 30 dias" />
                                                        <f:selectItem itemValue="semestre" itemLabel="Ultimo Semestre" />
                                                        <f:selectItem itemValue="ano" itemLabel="Ultimo Ano" />
                                                        <f:selectItem itemValue="especifico" itemLabel="Específicar" />
                                                    </p:selectOneMenu>
                                                </h:panelGroup>
                                            </h:column>
                                            <p:outputLabel value="Tipo de data: " rendered="#{compromissoUsuarioBean.tipoHistorico eq 'especifico'}" styleClass="margin-left-max"/>
                                            <p:selectOneMenu label="Tipo de pesquisa" value="#{compromissoUsuarioBean.tipoData}" filter="true" filterMatchMode="startsWith" rendered="#{compromissoUsuarioBean.tipoHistorico eq 'especifico'}">
                                                <p:ajax event="change" global="false" update="@this id_lista"/>
                                                <f:selectItem itemValue="todos" itemLabel="Todos" />
                                                <f:selectItem itemValue="igual" itemLabel="Igual" />
                                                <f:selectItem itemValue="apartir" itemLabel="A partir" />
                                                <f:selectItem itemValue="ate" itemLabel="Até" />
                                                <f:selectItem itemValue="faixa" itemLabel="Faixa" />
                                            </p:selectOneMenu>
                                            <p:inputMask value="#{compromissoUsuarioBean.dataInicial}" converter="#{isDateString}" rendered="#{compromissoUsuarioBean.tipoHistorico eq 'especifico' and compromissoUsuarioBean.tipoData eq 'igual' or compromissoUsuarioBean.tipoData eq 'apartir' or compromissoUsuarioBean.tipoData eq 'ate' or compromissoUsuarioBean.tipoData eq 'faixa'}" size="10" mask="99/99/9999" styleClass="text-center">
                                                <p:ajax event="change" update="@this" />
                                            </p:inputMask>
                                            <p:outputLabel value="até" rendered="#{compromissoUsuarioBean.tipoHistorico eq 'especifico' and compromissoUsuarioBean.tipoData eq 'faixa'}"/>
                                            <p:inputMask value="#{compromissoUsuarioBean.dataFinal}" converter="#{isDateString}" rendered="#{compromissoUsuarioBean.tipoHistorico eq 'especifico' and compromissoUsuarioBean.tipoData eq 'faixa'}" size="10" mask="99/99/9999" styleClass="text-center">
                                                <p:ajax event="change" update="@this" />
                                            </p:inputMask>
                                            <p:commandButton value="Filtrar" update="i_compromissos" action="#{compromissoUsuarioBean.listener('pesquisar')}" styleClass="margin-left-max"/>
                                        </h:panelGrid>
                                        <h:panelGrid id="i_compromissos">
                                            <p:dataTable value="#{compromissoUsuarioBean.listCompromissoUsuario}" var="list" scrollable="true" emptyMessage="Nenhum resultado encontrado" paginator="true" rows="10" rowStyleClass="#{(list.compromisso.particular and empty list.compromisso.cancelamento) ? 'bg-info' : ((list.compromisso.periodoRepeticao.id == 2 and empty list.compromisso.cancelamento) ? 'bg-green-ligth' : (not empty list.compromisso.cancelamento ? 'bg-salmon' : ''))}">
                                                <p:column width="15">  
                                                    <p:rowToggler rendered="#{not empty list.compromisso.listCompromissoUsuario}"/>  
                                                </p:column>
                                                <p:column styleClass="text-center" width="25">
                                                    <p:commandButton icon="ui-icon-pencil" action="#{compromissoUsuarioBean.edit(list)}" oncomplete="PF('eventDialogDetails').show()" update=":form_compromisso:i_panel_grid_fer"/>
                                                </p:column>
                                                <p:column styleClass="text-center" headerText="Data / Inicio" width="100">
                                                    #{list.compromisso.data}
                                                </p:column>
                                                <p:column styleClass="text-center" headerText="Semana" width="100">
                                                    #{dataHoje.getDiaSemana(list.compromisso.data).toUpperCase()} #{list.compromisso.semana != null ? list.compromisso.semana.descricao.toUpperCase().concat('-FEIRA') : ''}
                                                </p:column>
                                                <p:column styleClass="text-center" headerText="Hora Inicial" width="50">
                                                    #{list.compromisso.horaInicial}
                                                </p:column>
                                                <p:column headerText="Descrição">
                                                    #{list.compromisso.descricao}
                                                </p:column>
                                                <p:column headerText="Cancelado">
                                                    #{list.compromisso.cancelamento} por #{list.compromisso.usuarioCancelador.pessoa.nome}
                                                </p:column>                                                
                                                <p:rowExpansion>
                                                    <p:dataTable value="#{list.compromisso.listCompromissoUsuario}" var="compromissoUsuario" styleClass="sbb margin-top-max" emptyMessage="Nenhum registro encontrado!" rendered="false">
                                                        <p:column headerText="Usuário(s)">
                                                            #{compromissoUsuario.usuario.pessoa.nome}
                                                        </p:column>                                    
                                                    </p:dataTable>
                                                    <p:panelGrid styleClass="margin-top-max" columns="1">
                                                        <p:outputLabel value="DETALHES: #{compromissoUsuario.compromisso.detalhes}" rendered="#{not empty compromissoUsuario.compromisso.detalhes}" />                                    
                                                        <p:outputLabel value="LOCAL: #{compromissoUsuario.compromisso.local.enderecoSimplesToString} - #{compromissoUsuario.compromisso.local.cidade.cidade} / #{compromissoUsuario.compromisso.local.cidade.uf}" rendered="#{compromissoUsuario.compromisso.local != null}"/>
                                                        <p:outputLabel value="COM: #{compromissoUsuario.compromisso.pessoa.nome} (#{compromissoUsuario.pessoa.documento})" rendered="#{compromissoUsuario.compromisso.compromisso.pessoa != null}"/>
                                                    </p:panelGrid>
                                                </p:rowExpansion>
                                            </p:dataTable>
                                        </h:panelGrid>                                        
                                    </p:panel>
                                    <h:panelGroup layout="block" rendered="#{not empty menuPrincipalBean.listInconsistenciaBaixa}">
                                        <h:panelGrid>
                                            <p:commandButton value="EXISTE(M) INCONSISTÊCIA(S) NA BAIXA" onclick="PF('dlg_inconsistencia_baixa').show()" styleClass="font-color-red bold"/>
                                        </h:panelGrid>
                                        <!--
                                        -->
                                    </h:panelGroup>
                                    <p:dialog widgetVar="dlg_inconsistencia_baixa" modal="true"  header="Inconsistências na Baixa" width="800" height="400" resizable="false">
                                        <p:dataTable value="#{menuPrincipalBean.listInconsistenciaBaixa}" var="inconsistenciaBaixa">
                                            <p:column headerText="Nome">#{inconsistenciaBaixa.argumento0}</p:column>
                                            <p:column headerText="Serviço">#{inconsistenciaBaixa.argumento1}</p:column>
                                            <p:column headerText="Valor">
                                                <h:outputLabel value="#{inconsistenciaBaixa.argumento2}">
                                                    <f:convertNumber minFractionDigits="2" />
                                                </h:outputLabel>                                                    
                                            </p:column>
                                            <p:column headerText="Movimento ID">#{inconsistenciaBaixa.argumento3}</p:column>
                                            <p:column headerText="Dt. Baixa">
                                                <h:outputLabel value="#{inconsistenciaBaixa.argumento4}">
                                                    <f:convertDateTime pattern="dd/MM/yyyy" locale="pt,BR" dateStyle="long" />
                                                </h:outputLabel>                                                    
                                            </p:column>
                                            <p:column headerText="Baixa ID">#{inconsistenciaBaixa.argumento5}</p:column>
                                            <p:column headerText="Caixa">#{inconsistenciaBaixa.argumento6}</p:column>
                                        </p:dataTable> 
                                    </p:dialog>
                                    <c:if test="#{configuracaoHomologacaoBean.configuracaoHomologacao.webValidaAgendamento}">
                                        <c:if test="#{menuPrincipalBean.existsPedidosAgendamento}">
                                            <p:notificationBar  effect="fade" effectSpeed="slow" styleClass="top" widgetVar="bar" autoDisplay="true" position="bottom" style="text-align: center; background: #ffd9a2!important">
                                                <br />                                            
                                                <h:outputText value="EXISTEM PEDIDOS DE AGENDAMENTO PARA SEREM CONFIRMADO(S) !!!" style="font-size: 24px!important; color: red; font-weight: bold;" />
                                            </p:notificationBar>
                                        </c:if>
                                    </c:if>

                                    <ui:include id="template_processo_automatico" src="templates/templateProcessamentoAutomatico.xhtml" />

                                </p:column>

                                <p:column>
                                    <!-- <p:panel>
                                        <h:panelGrid>
                                            <h:outputText style="font-weight: bold" value="Meus principais Acessos" />
                                        </h:panelGrid>
                                        <br />
                                        <h:panelGrid style="text-align: left;">
                                            <c:forEach items="# {controleUsuarioBean.listaContador}" var="contadorAcesso">
                                                <h:commandLink value="# {contadorAcesso.rotina.rotina}" action="# {chamadaPaginaBean.chamadaGenerica(contadorAcesso)}" style="margin-bottom: 10px; font-size: 9pt" class="listaAcesso" title="Menu # {contadorAcesso.modulo.descricao}"/>
                                                <br />
                                            </c:forEach>
                                        </h:panelGrid>
                                    </p:panel> -->
                                </p:column>
                            </h:panelGrid>                            
                        </p:panel>



                        <p:dialog widgetVar="dlg_agenda_contato" modal="true" footer="Felicite esta pessoa" width="600" height="400" resizable="false">
                            <f:facet name="header">
                                <h:panelGrid columns="2">
                                    <h:graphicImage value="/Imagens/icon-birthday.png" width="16" />
                                    <h:column>Aniversariantes</h:column>
                                </h:panelGrid>
                            </f:facet>
                            <p:dataTable var="agendaContato" value="#{agendaNotificaoBean.listAniversariantes}" paginator="true" rows="15">
                                <p:column headerText="Principal" width="80">
                                    #{agendaContato.agenda.nome}
                                </p:column>
                                <p:column headerText="Data" width="80">
                                    <h:outputLabel value="#{agendaContato.nascimentoString}" />
                                </p:column>
                                <p:column headerText="Aniversariante">
                                    #{agendaContato.contato}
                                </p:column>
                                <p:column headerText="Depto">
                                    #{agendaContato.departamento}
                                </p:column>
                                <p:column headerText="Email">
                                    <p:outputLabel value="#{agendaContato.email1}" title="#{agendaContato.email2}" />
                                </p:column>
                            </p:dataTable>                                
                        </p:dialog>

                        <p:dialog widgetVar="i_dlg_guias" header="Lista de Guias sem baixar" resizable="false" modal="true">
                            <h:column rendered="#{emissaoGuiasBean.listHistoricoEmissaoGuias != null}">
                                <p:dataTable value="#{emissaoGuiasBean.listHistoricoEmissaoGuias}" var="historicoEmissaoGuias" id="tbl" emptyMessage="Nenhuma guia encontrada!" style="width: 550px">
                                    <p:column headerText="Nome Pessoa">
                                        <h:outputText value="#{historicoEmissaoGuias.movimento.pessoa.nome}"/>
                                    </p:column>                                            
                                    <p:column headerText="Valor" style="text-align: center" width="100">
                                        <h:outputText value="R$ " style="float: left"/>
                                        <h:outputText value="#{historicoEmissaoGuias.movimento.valorBaixaString}" style="float: right"/>
                                    </p:column>                                            
                                    <p:column headerText="" style="text-align: center" width="40">
                                        <p:commandLink value="Baixar" type="submit" action="#{emissaoGuiasBean.baixarErrado(historicoEmissaoGuias)}" oncomplete="PF('i_dlg_guias').hide()" style="font-weight: bold"/>  
                                    </p:column>                                            
                                    <p:column headerText="" style="text-align: center" width="40" rendered="false">
                                        <p:commandLink value="Excluir" type="submit" action="#{emissaoGuiasBean.excluirErrado(historicoEmissaoGuias)}" oncomplete="PF('i_dlg_guias').hide()" style="font-weight: bold"/>  
                                    </p:column>
                                </p:dataTable>
                            </h:column>
                            <br /><br />
                            <p:commandButton value="Cancelar" type="button" styleClass="ui-confirmdialog-no" onclick="PF('i_dlg_guias').hide()" style="float: left" />
                        </p:dialog> 
                    </h:form>
                </f:view>

                <!-- FINALIZA div wrap main -->
            </div>
        </div>
        <h:form id="form_compromisso" rendered="#{!controleAcessoBean.verificarPermissao('consulta_agenda_compromissos', 4)}">
            <h:outputScript name="tradutor_primefaces.js" library="js" />
            <!-- <p:dialog widgetVar="eventDialog" header="Compromissos" resizable="true" modal="true" width="1024" position="top" height="600">
                <p:schedule id="schedule" value="# {compromissoUsuarioBean.eventModel}" widgetVar="myschedule"  locale="pt" timeZone="GMT-3">
                    < ! - -   <p:ajax event="dateSelect" listener="# {compromissoUsuarioBean.selectedData}" update="i_panel_grid_fer" />  - - >
                    <p:ajax event="eventSelect" listener="# {compromissoUsuarioBean.edit}" update=":form_compromisso:i_panel_grid_fer" oncomplete="PF('eventDialogDetails').show()"/>  
                </p:schedule>              
            </p:dialog> -->
            <p:dialog widgetVar="eventDialogDetails" header="Compromisso" resizable="false" modal="true" width="800" position="top">
                <p:panel id="i_panel_grid_fer">
                    <h:panelGrid columns="2" rendered="#{compromissoUsuarioBean.compromissoUsuario.id != null}">
                        <p:outputLabel value="Secretária:"  />
                        <p:outputLabel value="#{compromissoUsuarioBean.compromissoUsuario.compromisso.secretaria.pessoa.nome}"  />
                        <p:outputLabel value="Data:"  />
                        <p:outputLabel value="#{compromissoUsuarioBean.compromissoUsuario.compromisso.data}"  />
                        <p:outputLabel value="Hora Inicial:"  />
                        <p:outputLabel value="#{compromissoUsuarioBean.compromissoUsuario.compromisso.horaInicial}"  />
                        <p:outputLabel value="Hora Final:"  />
                        <p:outputLabel value="#{compromissoUsuarioBean.compromissoUsuario.compromisso.horaFinal}"  />
                        <p:outputLabel value="Categoria:"  />
                        <p:outputLabel value="#{compromissoUsuarioBean.compromissoUsuario.compromisso.compromissoCategoria.descricao}"  />
                        <p:outputLabel value="Descrição:"  />
                        <p:outputLabel value="#{compromissoUsuarioBean.compromissoUsuario.compromisso.descricao}"  />
                        <p:outputLabel value="Detalhes:"  />
                        <p:outputLabel value="#{compromissoUsuarioBean.compromissoUsuario.compromisso.detalhes}"  />
                        <p:outputLabel value="Local:"  />
                        <h:column>
                            <p:outputLabel value="#{compromissoUsuarioBean.compromissoUsuario.compromisso.localNome} - " rendered="#{not empty compromissoUsuarioBean.compromissoUsuario.compromisso.localNome}"/>
                            <p:outputLabel value="#{compromissoUsuarioBean.compromissoUsuario.compromisso.local.enderecoSimplesToString} #{compromissoUsuarioBean.compromissoUsuario.compromisso.local.cidade.cidade} / #{compromissoUsuarioBean.compromissoUsuario.compromisso.local.cidade.uf} - #{compromissoUsuarioBean.compromissoUsuario.compromisso.numero} #{compromissoUsuarioBean.compromissoUsuario.compromisso.complemento}" rendered="#{compromissoUsuarioBean.compromissoUsuario.compromisso.local != null}"/>                            
                        </h:column>
                        <p:outputLabel value="Pessoa:"  />
                        <h:column>
                            <p:outputLabel value="#{compromissoUsuarioBean.compromissoUsuario.compromisso.pessoa.nome} (#{compromissoUsuarioBean.compromissoUsuario.compromisso.pessoa.documento})" rendered="#{compromissoUsuarioBean.compromissoUsuario.compromisso.pessoa != null}"/>
                            <p:commandButton icon="ui-icon-info"  onclick="PF('dlg_pessoa_card').show()" update=":form_compromisso:i_pessoa_card" action="#{pessoaCardBean.cardPessoa(compromissoUsuarioBean.compromissoUsuario.compromisso.pessoa)}" title="Ver detalhes" rendered="#{compromissoUsuarioBean.compromissoUsuario.compromisso.pessoa != null}" styleClass="margin-left-max"/>
                        </h:column>
                        <p:outputLabel value="Cadastrado:"  />
                        <p:outputLabel value="#{compromissoUsuarioBean.compromissoUsuario.compromisso.cadastro}"/>
                    </h:panelGrid>
                    <f:facet name="footer">
                        <p:commandButton value="Cancelar" onclick="PF('dlg_cancel').show();" rendered="#{compromissoUsuarioBean.compromissoUsuario.compromisso.id ne null}" />
                    </f:facet>                
                </p:panel>
            </p:dialog>
            <p:dialog widgetVar="dlg_cancel"  modal="true" resizable="true" header="Motivo do cancelamento?" width="300">
                <p:messages autoUpdate="true" showDetail="true" showSummary="true" id="out_message_compromisso"/>
                <p:inputTextarea value="#{compromissoUsuarioBean.compromisso.motivoCancelamento}" />
                <f:facet name="footer">
                    <h:panelGrid columns="2">
                        <p:commandButton value="Sim" title="Excluir" action="#{compromissoUsuarioBean.cancel()}" update=":form_compromisso:out_message_compromisso" />
                        <p:commandButton value="Não" title="Cancelar" onclick="PF('dlg_delete').hide();"/>
                    </h:panelGrid>
                </f:facet>
            </p:dialog>              
            <p:dialog widgetVar="dlg_pessoa_card" modal="true" resizable="false" height="400" width="400" header="Detalhes" position="top">
                <p:ajax event="close" listener="#{pessoaCardBean.close}"/>  
                <p:panel id="i_pessoa_card">
                    <ui:include src="templates/templatePessoaCard.xhtml" />    
                </p:panel>
            </p:dialog>
        </h:form>
        <!-- FINALIZA div wrap main -->
        <div id="footerx">
            <f:subview id="footer">
                <ui:include src="templates/templateFooter.xhtml"/>
            </f:subview>
        </div>
    </h:body>
</html>
