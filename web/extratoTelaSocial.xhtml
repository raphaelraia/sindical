<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>Sindical - Extrato Tela Social</title>
        <meta http-equiv="X-UA-Compatible" content="IE=9" />
        <link rel="shortcut icon" href="#{facesContext.externalContext.requestContextPath}/Imagens/favicon.ico"/>  
        <style type="text/css">
            .ui-widget-content .ui-inputfield{ padding: 8px!important; } 
            .ui-button { padding: 3px!important; }
            .ui-selectonemenu {padding-right: 25px!important;}

            .tblExtratoTelaX{ background-color: #ff9587!important; }
            .tblExtratoTelaX:hover{ background-color: #fe887f!important; }

            .tblExtratoTelaT1{ background-color: #c7ffc7!important; }
            .tblExtratoTelaT2{  }            
        </style>

        <script type="text/javascript">

        </script>
    </h:head>
    <h:body>
        <!-- INICIA DIV wrap e main -->
        <div id="wrapx">
            <div id="mainx">
                <!-- INICIA DIV wrap e main -->  
                <f:subview id="header">
                    <ui:include src="templates/templatePrime.xhtml"/>
                    <ui:include src="templates/templateStatus.xhtml"/>
                </f:subview>

                <f:view>
                    <p:panel style="margin: 0 auto; border: 0; width: #{configuracaoBean.resolucao.tipoResolucao.tamanho}">
                        <h:outputText value="Extrato Tela Social" styleClass="fonteHeader" />
                        <h:form id="formExtratoTelaSocial">
                            <div class="clear"></div>
                            <p:panel styleClass="fundoCinza">
                                <h:panelGrid id="header_opcoes" columns="8" cellspacing="5">
                                    <h:column>
                                        <p:outputLabel value="Filtrar por" /><br />
                                        <p:selectOneMenu value="#{extratoTelaSocialBean.porPesquisa}">
                                            <p:ajax event="change" update="@this" />
                                            <f:selectItem itemValue="todos"             itemLabel="Todas"/>
                                            <f:selectItem itemValue="recebidas"         itemLabel="Recebidas"/>
                                            <f:selectItem itemValue="nao_recebidas"     itemLabel="Não Recebidas"/>
                                            <f:selectItem itemValue="atrasadas"         itemLabel="Atrasadas"/>
                                        </p:selectOneMenu>
                                    </h:column>

                                    <h:column>
                                        <p:outputLabel value="Status do Boleto"/><br />
                                        <p:selectOneMenu value="#{extratoTelaSocialBean.indexListaStatusRetorno}" >
                                            <p:ajax event="change" update="header_opcoes" global="false" listener="#{extratoTelaSocialBean.changeStatusRetorno}"/>
                                            <f:selectItems value="#{extratoTelaSocialBean.listaStatusRetorno}" />
                                        </p:selectOneMenu>
                                    </h:column>

                                    <h:column>
                                        <p:outputLabel value="Ordenação" /><br />
                                        <p:selectOneMenu value="#{extratoTelaSocialBean.ordenacao}">
                                            <p:ajax event="change" update="@this"/>
                                            <f:selectItem itemValue="referencia" itemLabel="Referência"/>
                                            <f:selectItem itemValue="vencimento" itemLabel="Vencimento"/>
                                            <f:selectItem itemValue="baixa"      itemLabel="Baixa"/>
                                            <f:selectItem itemValue="ocorrencia" itemLabel="Ocorrência"/>
                                            <f:selectItem itemValue="importacao" itemLabel="Importação"/>
                                            <f:selectItem itemValue="boleto"     itemLabel="Boleto"/>
                                        </p:selectOneMenu>
                                    </h:column>

                                    <h:column>
                                        <h:panelGrid>                                    
                                            <p:outputLabel value="Conta Cobrança" />
                                            <h:panelGrid rendered="#{extratoTelaSocialBean.statusRemessa.id eq -1}">
                                                <p:selectOneMenu value="#{extratoTelaSocialBean.indexConta}" autoWidth="false" style="width: 250px">
                                                    <p:ajax event="change" update="formExtratoTelaSocial" listener="#{extratoTelaSocialBean.alterarContaRemessa()}"/>
                                                    <f:selectItems value="#{extratoTelaSocialBean.listaConta}" />
                                                </p:selectOneMenu>
                                            </h:panelGrid>                                    

                                            <h:panelGrid rendered="#{extratoTelaSocialBean.statusRemessa.id ne -1}">
                                                <h:panelGrid columns="2">
                                                    <p:outputLabel value="#{extratoTelaSocialBean.contaSelecionada.apelido} - #{extratoTelaSocialBean.contaSelecionada.codCedente} - #{extratoTelaSocialBean.contaSelecionada.contaBanco.banco.banco}" style="font-weight: bold; font-size: 11pt!important"/>
                                                    <p:commandButton icon="ui-icon-close" action="#{extratoTelaSocialBean.fecharModalRemessa()}" update="formExtratoTelaSocial formExtratoTelaSocialOpcoes"/>
                                                </h:panelGrid>
                                            </h:panelGrid>
                                        </h:panelGrid>
                                    </h:column>

                                    <h:column>
                                        <h:panelGrid>                                    
                                            <p:outputLabel value="Filial" rendered="false"/>
                                            <p:selectOneMenu value="#{extratoTelaSocialBean.idFilial}" style="width: 330px!important" autoWidth="false" rendered="false">
                                                <p:ajax event="change" update="@this"  global="false" />
                                                <f:selectItems value="#{extratoTelaSocialBean.listaFilial}"/> 
                                            </p:selectOneMenu>  
                                        </h:panelGrid>
                                    </h:column>

                                    <h:column>
                                        <br />
                                        <p:commandButton value="FILTRAR LISTA" style="font-weight: bold; " action="#{extratoTelaSocialBean.loadLista()}" update="formExtratoTelaSocial formExtratoTelaSocialOpcoes" />
                                    </h:column>
                                </h:panelGrid>                                 
                            </p:panel>

                            <h:panelGrid columns="3" styleClass="margin-top-max" style="width: 100%">
                                <h:column>
                                    <p:panel id="i_fieldset_data" header="DATA" style="height: 160px; width: 240px">
                                        <h:panelGrid>
                                            <h:column>
                                                <h:panelGrid columns="2">
                                                    <p:selectOneMenu value="#{extratoTelaSocialBean.tipoDataPesquisa}" style="width: 100px!important" autoWidth="false">
                                                        <p:ajax event="change" update="i_fieldset_data" global="false" listener="#{extratoTelaSocialBean.limparDatas}"/>
                                                        <f:selectItem itemValue="importacao"  itemLabel="Importação" />
                                                        <f:selectItem itemValue="ocorrencia"  itemLabel="Recebimento(Ocorrência)" />
                                                        <f:selectItem itemValue="vencimento"  itemLabel="Vencimento" />
                                                        <f:selectItem itemValue="baixa"       itemLabel="Baixa" />
                                                        <f:selectItem itemValue="referencia"  itemLabel="Referência" />
                                                        <f:selectItem itemValue="lancamento"  itemLabel="Lançamento" />
                                                        <f:selectItem itemValue="registro"    itemLabel="Registro" />
                                                    </p:selectOneMenu>
                                                    <p:selectOneMenu value="#{extratoTelaSocialBean.tipoData}">
                                                        <p:ajax event="change" update="i_fieldset_data" global="false" listener="#{extratoTelaSocialBean.limparTipoDatas}"/>
                                                        <f:selectItem itemValue="igual" itemLabel="Igual" />
                                                        <f:selectItem itemValue="apartir" itemLabel="A partir" />
                                                        <f:selectItem itemValue="ate" itemLabel="Até" />
                                                        <f:selectItem itemValue="faixa" itemLabel="Faixa" />
                                                    </p:selectOneMenu>                                                        
                                                </h:panelGrid>
                                            </h:column>
                                            <h:column>
                                                <h:panelGrid columns="2" rendered="#{extratoTelaSocialBean.tipoDataPesquisa ne 'referencia'}" style="width: 100%">
                                                    <p:outputLabel value="Data #{extratoTelaSocialBean.tipoData eq 'faixa' ? 'Inicial' : ''}" style="font-weight: bold"/>
                                                    <p:inputMask value="#{extratoTelaSocialBean.dataInicial}" mask="99/99/9999" style="width: 100px; text-align: center; font-size: 10pt!important; float: right" placeholder="__/__/____" converter="#{isDateString}">
                                                        <p:ajax event="change" update="@this" global="false"/>
                                                    </p:inputMask>
                                                    <p:outputLabel value="Data Final:" style="font-weight: bold" rendered="#{extratoTelaSocialBean.tipoData eq 'faixa'}"/>
                                                    <p:inputMask value="#{extratoTelaSocialBean.dataFinal}" mask="99/99/9999" style="width: 100px; text-align: center; font-size: 10pt!important; float: right" placeholder="__/__/____" converter="#{isDateString}" rendered="#{extratoTelaSocialBean.tipoData eq 'faixa'}">
                                                        <p:ajax event="change" update="@this" global="false"/>
                                                    </p:inputMask>
                                                </h:panelGrid>
                                            </h:column>
                                            <h:column>
                                                <h:panelGrid columns="2" rendered="#{extratoTelaSocialBean.tipoDataPesquisa eq 'referencia'}" style="width: 100%">
                                                    <p:outputLabel value="Mês/Ano #{extratoTelaSocialBean.tipoData eq 'faixa' ? 'Inicial' : ''}" style="font-weight: bold"/>
                                                    <p:inputMask value="#{extratoTelaSocialBean.dataRefInicial}" mask="99/9999" style="width: 100px; text-align: center; font-size: 10pt!important; float: right" placeholder="__/____" converter="#{isDateReference}">
                                                        <p:ajax event="change" update="@this" global="false"/>
                                                    </p:inputMask>

                                                    <p:outputLabel value="Mês/Ano Final:" style="font-weight: bold" rendered="#{extratoTelaSocialBean.tipoData eq 'faixa'}"/>
                                                    <p:inputMask value="#{extratoTelaSocialBean.dataRefFinal}" mask="99/9999" style="width: 100px; text-align: center; font-size: 10pt!important; float: right" placeholder="__/____" converter="#{isDateReference}" rendered="#{extratoTelaSocialBean.tipoData eq 'faixa'}">
                                                        <p:ajax event="change" update="@this" global="false"/>
                                                    </p:inputMask>
                                                </h:panelGrid>
                                            </h:column>
                                        </h:panelGrid>
                                    </p:panel>


                                </h:column>

                                <h:column>
                                    <p:panel id="i_fieldset_boleto" header="Nº DE BOLETO"  style="height: 160px; width: 190px">
                                        <h:panelGrid> 
                                            <p:outputLabel value="Boleto Inicial" style="font-weight: bold"/>
                                            <p:inputText value="#{extratoTelaSocialBean.boletoInicial}" style="text-align: right">
                                                <p:ajax event="change" update="@this" global="false"/>
                                            </p:inputText> 
                                            <p:outputLabel value="Boleto Final" style="font-weight: bold"/>
                                            <p:inputText value="#{extratoTelaSocialBean.boletoFinal}" style="text-align: right">
                                                <p:ajax event="change" update="@this" global="false"/>
                                            </p:inputText>
                                        </h:panelGrid>
                                    </p:panel>
                                </h:column>

                                <h:column>
                                    <p:panel id="i_fieldset_pessoa" header="SERVIÇOS E PESSOA"  style="height: 160px;">

                                        <h:panelGrid columns="3" style="width: 100%">
                                            <h:column>
                                                <h:panelGrid>
                                                    <p:outputLabel value="Serviços" style="font-weight: bold"/>
                                                    <p:selectOneMenu value="#{extratoTelaSocialBean.idServicos}" style="width: 350px" autoWidth="false" filter="true" caseSensitive="false">
                                                        <p:ajax event="change" update="@this" global="false"/>
                                                        <f:selectItems value="#{extratoTelaSocialBean.listaServicos}"/>
                                                    </p:selectOneMenu>
                                                </h:panelGrid>
                                            </h:column>

                                            <h:column>
                                                <h:panelGrid>
                                                    <p:outputLabel value="Tipo" style="font-weight: bold"/>
                                                    <p:selectOneMenu value="#{extratoTelaSocialBean.idTipoServico}" style="width: 100px" autoWidth="false">
                                                        <p:ajax event="change" update="@this" global="false"/>
                                                        <f:selectItems value="#{extratoTelaSocialBean.listaTipoServico}"/>
                                                    </p:selectOneMenu>
                                                </h:panelGrid>
                                            </h:column>

                                            <h:column>
                                                <h:panelGrid>
                                                    <p:outputLabel value="Tipo de Pessoa" style="font-weight: bold"/>
                                                    <p:selectOneMenu value="#{extratoTelaSocialBean.tipoPessoa}" style="width: 100px" autoWidth="false">
                                                        <p:ajax event="change" update="@this formExtratoTelaSocial" listener="#{extratoTelaSocialBean.loadLista()}" />
                                                        <f:selectItem itemValue="nenhum"  itemLabel="-- Selecione o tipo de Pessoa --" />
                                                        <f:selectItem itemValue="responsavel"  itemLabel="Responsável"/>
                                                        <f:selectItem itemValue="titular"      itemLabel="Titular"/>
                                                        <f:selectItem itemValue="beneficiario" itemLabel="Beneficiário"/>
                                                    </p:selectOneMenu>
                                                </h:panelGrid>
                                            </h:column>
                                        </h:panelGrid>
                                        <h:panelGrid>
                                            <p:outputLabel value="Pessoa" styleClass="bold"/>                                                        
                                        </h:panelGrid>
                                        <h:panelGrid columns="4">
                                            <p:inputText value="#{extratoTelaSocialBean.pessoa.documento}" disabled="true" style="width: 130px; font-weight: bold; opacity: .5"/>
                                            <p:inputText value="#{extratoTelaSocialBean.pessoa.nome}" disabled="true" style="width: #{(configuracaoBean.resolucao.tipoResolucao.tamanho == '1200' || configuracaoBean.resolucao.tipoResolucao.tamanho == '') ? '445px' : '260px'}; font-weight: bold; opacity: .5"/>
                                            <p:commandButton icon="ui-icon-search" alt="Pesquisar Pessoa" action="#{chamadaPaginaBean.pesquisaPessoa}" disabled="#{extratoTelaSocialBean.tipoPessoa eq 'nenhum'}"/>
                                            <p:commandButton icon="ui-icon-close" alt="Excluir Pessoa" action="#{extratoTelaSocialBean.removerPessoa()}" update="i_fieldset_pessoa" disabled="#{extratoTelaSocialBean.tipoPessoa eq 'nenhum'}"/>
                                        </h:panelGrid>
                                    </p:panel>
                                </h:column>

                            </h:panelGrid>


                            <p:messages id="i_msg" closable="true" showDetail="true" autoUpdate="true"/>

                            <p:dataTable value="#{extratoTelaSocialBean.listaMovimento}" var="linha" id="tbl" rows="50" emptyMessage="Nenhum Boleto Pesquisado" scrollable="true" scrollHeight="300" paginator="true" scrollWidth="100%" styleClass="margin-top-max">
                                <f:facet name="header">
                                    <h:panelGroup>
                                        <br />
                                        <p:selectBooleanCheckbox value="#{extratoTelaSocialBean.selecionaTodos}" itemLabel="Selecionar Todos Movimentos da lista" styleClass="font-color-red float-left">
                                            <p:ajax event="change" update="@this @form" listener="#{extratoTelaSocialBean.marcarTodos()}"/>
                                        </p:selectBooleanCheckbox>
                                        <br />
                                    </h:panelGroup>
                                </f:facet>

                                <p:column style="width:15px">  
                                    <p:rowToggler />  
                                </p:column>  

                                <p:column style="width:15px; text-align: center">
                                    <p:selectBooleanCheckbox value="#{linha.argumento0}">
                                        <p:ajax event="change" update="@this" global="false"/>
                                    </p:selectBooleanCheckbox>
                                </p:column>

                                <p:column headerText="Responsável" style="width:200px" rendered="#{(extratoTelaSocialBean.tipoPessoa eq 'nenhum') ? true : (extratoTelaSocialBean.tipoPessoa ne 'responsavel')}">
                                    <p:outputLabel value="#{linha.argumento1[2]}" />
                                </p:column>

                                <p:column headerText="Titular" style="width:200px" rendered="#{(extratoTelaSocialBean.tipoPessoa eq 'nenhum') ? true : (extratoTelaSocialBean.tipoPessoa ne 'titular')}">
                                    <p:outputLabel value="#{linha.argumento1[3]}" />
                                </p:column>

                                <p:column headerText="Beneficiário" style="width:200px" rendered="#{(extratoTelaSocialBean.tipoPessoa eq 'nenhum') ? true : (extratoTelaSocialBean.tipoPessoa ne 'beneficiario')}">
                                    <p:outputLabel value="#{linha.argumento1[4]}" />
                                </p:column>

                                <p:column headerText="Boleto" style="width: 120px; text-align: center">
                                    <p:outputLabel value="#{linha.argumento1[5]}" />
                                </p:column>

                                <p:column headerText="Serviço" style="width: 210px">
                                    <p:outputLabel value="#{linha.argumento1[6]}" />
                                </p:column>

                                <p:column headerText="Tipo" style="width: 80px">
                                    <p:outputLabel value="#{linha.argumento1[7]}" />
                                </p:column>

                                <p:column headerText="Ref" style="width: 45px; text-align: center">
                                    <p:outputLabel value="#{linha.argumento1[8]}" />
                                </p:column>

                                <p:column headerText="Vencto" style="width: 60px; text-align: center">
                                    <p:outputLabel value="#{linha.argumento1[9]}">
                                        <f:convertDateTime />
                                    </p:outputLabel>
                                </p:column>

                                <p:column headerText="Valor" style="width: 60px; text-align: right">
                                    <p:outputLabel value="#{linha.argumento1[10]}">
                                        <f:convertNumber type="currency" currencySymbol=""/>
                                    </p:outputLabel>
                                </p:column>
                                
                                <p:column headerText="#{extratoTelaSocialBean.tipoDataPesquisa eq 'ocorrencia' ? 'Recebimento(Ocorrência)' : 'Baixa'}" style="text-align: center; width: 60px">
                                    <p:outputLabel value="#{extratoTelaBean.tipoDataPesquisa eq 'ocorrencia' ? linha.argumento1[21] : linha.argumento1[11]}">
                                        <f:convertDateTime />
                                    </p:outputLabel>
                                </p:column>

                                <p:column headerText="Vlr Baixa" style="width: 60px; text-align: right">
                                    <p:outputLabel value="#{extratoTelaSocialBean.converteValor(linha.argumento1[12])}" />
                                </p:column>

                                <p:column headerText="Taxa" style="width: 30px">
                                    <p:outputLabel value="#{extratoTelaSocialBean.converteValor(linha.argumento1[13])}" />
                                </p:column>

                                <p:rowExpansion>
                                    <h:panelGrid columns="6" style="height: 40px" styleClass="sbb">
                                        <p:column>
                                            <p:outputLabel value="Documento do Responsável" style="font-weight: bold"/><br />
                                            <p:outputLabel value="#{linha.argumento1[1]}" />
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel value="Documento do Titular" style="font-weight: bold"/><br />
                                            <p:outputLabel value="#{linha.argumento1[16]}" />
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel value="Documento do Beneficiário" style="font-weight: bold"/><br />
                                            <p:outputLabel value="#{linha.argumento1[17]}" />
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel value="Vencimento do Boleto" style="font-weight: bold"/><br />
                                            <p:outputLabel value="#{extratoTelaSocialBean.converteData(linha.argumento1[18])}" />
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel value="Vencimento Original do Boleto" style="font-weight: bold"/><br />
                                            <p:outputLabel value="#{extratoTelaSocialBean.converteData(linha.argumento1[19])}" />
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel value="Data de Importação" style="font-weight: bold"/><br />
                                            <p:outputLabel value="#{extratoTelaSocialBean.converteData(linha.argumento1[20])}" />
                                        </p:column>

                                        <p:column>
                                            <c:choose>
                                                <c:when test="#{extratoTelaSocialBean.tipoDataPesquisa eq 'importacao' or extratoTelaSocialBean.tipoDataPesquisa eq 'vencimento' or extratoTelaSocialBean.tipoDataPesquisa eq 'baixa' or extratoTelaSocialBean.tipoDataPesquisa eq 'referencia' or extratoTelaSocialBean.tipoDataPesquisa eq 'lancamento'or extratoTelaSocialBean.tipoDataPesquisa eq 'registro'}">
                                                    <p:outputLabel value="Recebimento(Ocorrência)" style="font-weight: bold" /><br />
                                                    <p:outputLabel value="#{linha.argumento1[21]}">
                                                        <f:convertDateTime />
                                                    </p:outputLabel>
                                                </c:when>                                                
                                                <c:when test="#{extratoTelaSocialBean.tipoDataPesquisa eq 'ocorrencia'}">
                                                    <p:outputLabel value="Baixa" style="font-weight: bold"  /><br />
                                                    <p:outputLabel value="#{linha.argumento1[11]}">
                                                        <f:convertDateTime />
                                                    </p:outputLabel>
                                                </c:when>
                                            </c:choose>
                                        </p:column>
                                    </h:panelGrid>
                                </p:rowExpansion>                                
                            </p:dataTable>

                            <h:panelGrid id="i_panel_valores" columns="7" style="margin-top: 10px">
                                <h:column>
                                    <p:outputLabel value="Núm de Movimentos" for="idQntBoletos"/><br />
                                    <h:inputText id="idQntBoletos" size="14" value="#{extratoTelaSocialBean.qntBoletos}" readonly="true" style="font-weight:bold; text-align:center; margin-right: 15px"/>
                                </h:column>

                                <h:column>
                                    <p:outputLabel value="Total Recebido " styleClass="fonteExtratoTela" for="idSomarVlRecebido"/> <br />
                                    <h:inputText id="idSomarVlRecebido" value="#{extratoTelaSocialBean.vlRecebido}" size="15" readonly="true" style="font-weight:bold; text-align: right; margin-right: 15px"/>
                                </h:column>

                                <h:column>
                                    <p:outputLabel value="Total NÃO Recebido" styleClass="fonteExtratoTela" for="idSomarVlNaoRecebido"/> <br />
                                    <h:inputText id="idSomarVlNaoRecebido" value="#{extratoTelaSocialBean.vlNaoRecebido}" size="15" readonly="true" style="font-weight:bold; text-align: right; margin-right: 15px"/>
                                </h:column>

                                <h:column>
                                    <p:outputLabel value="Total Valor" /> <br />
                                    <h:inputText id="idSomarVlTotal" value="#{extratoTelaSocialBean.vlTotal}" size="15" readonly="true" style="font-weight:bold; text-align: right; margin-right: 15px" />
                                </h:column>

                                <h:column>
                                    <p:outputLabel value="Total Taxa" for="idSomarTaxa"/> <br />
                                    <h:inputText id="idSomarTaxa" value="#{extratoTelaSocialBean.vlTaxa}" size="10" readonly="true" style="font-weight:bold; text-align: right; margin-right: 15px" />
                                </h:column>

                                <h:column>
                                    <p:outputLabel value="Total Liquido" for="idSomarVlLiquido"/> <br />
                                    <h:inputText id="idSomarVlLiquido" value="#{extratoTelaSocialBean.vlLiquido}" size="15" readonly="true" style="font-weight:bold; text-align: right; margin-right: 15px" />
                                </h:column>
                            </h:panelGrid>
                        </h:form>

                        <h:form id="formExtratoTelaSocialOpcoes">
                            <p:messages closable="true" showDetail="true"/>
                            <p:panel styleClass="fundoCinza">
                                <p:outputLabel value="Opções do Boleto" style="font-weight: bold; font-size: 8pt!important"/>

                                <h:panelGrid columns="8" style="width: 955px">
                                    <h:column>
                                        <p:selectBooleanCheckbox value="#{extratoTelaSocialBean.imprimirVerso}" itemLabel="Imprimir Verso" style="margin-right: 20px"/>
                                    </h:column>

                                    <h:column>
                                        <p:commandLink action="#{extratoTelaSocialBean.imprimir}" title="Imprimir Boletos Selecionados" ajax="false" target="_BLANK">
                                            <p:commandButton icon="ui-icon-print" value="Imprimir" title="Imprimir Boletos Selecionados" ajax="false" style="margin-right: 20px"/>
                                        </p:commandLink>
                                    </h:column>

                                    <h:column>
                                        <p:commandButton icon="ui-icon-print" value="Criar Remessa" title="Gerar Remessa de Boletos" action="#{extratoTelaSocialBean.adicionarRemessa()}" style="margin-right: 20px"/>
                                    </h:column>

                                    <h:column>
                                        <p:commandButton icon="ui-icon-close" value="Excluir" title="Excluir Boletos Selecionados" disabled="#{extratoTelaSocialBean.cab.verificarPermissao('excluirBoletoExtratoSocial', 2)}" onclick="PF('dlg_excluir').show()" style="margin-right: 20px"/>
                                    </h:column>

                                    <h:column>
                                        <p:commandButton icon="ui-icon-arrowreturnthick-1-w" value="Estornar" title="Estornar Boletos Selecionados (Apenas Pagos)" disabled="#{extratoTelaSocialBean.cab.verificarPermissao('estornarBoletoExtratoSocial', 3)}" onclick="PF('dlg_estornar').show()" style="margin-right: 20px"/>
                                    </h:column>

                                    <h:column>
                                        <p:commandButton icon="ui-icon-mail-closed" value="Enviar por Email" title="Enviar movimentos por Email (dos respectivas responsáveis)" onclick="PF('dlg_enviar_email').show()" disabled="true"/>
                                    </h:column>
                                    <h:column>
                                        <p:outputLabel value=" para " styleClass="fontePadrao" />
                                    </h:column>

                                    <h:column>
                                        <p:selectOneMenu value="#{extratoTelaSocialBean.tipoEnvio}">
                                            <p:ajax event="change" update="@this" global="false"/>
                                            <f:selectItem itemValue="responsavel" itemLabel="Responsável"/>
                                        </p:selectOneMenu>                                        
                                    </h:column>
                                </h:panelGrid>
                            </p:panel>

                            <p:panel styleClass="fundoCinza" style="margin-top: 10px">
                                <p:outputLabel value="Opções do Acordo" style="font-weight: bold; font-size: 8pt!important"/>

                                <h:panelGrid columns="3">
                                    <h:column>
                                        <p:commandButton icon="ui-icon-close" value="Excluir Acordo" style="margin-right: 15px" title="Excluir Acordos Selecionados" onclick="PF('dlg_acordo').show()" disabled="#{extratoTelaSocialBean.cab.verificarPermissao('excluir_acordo_social', 2)}"/>
                                    </h:column>

                                    <h:column>
                                        <p:commandLink action="#{extratoTelaSocialBean.imprimirPlanilha}" title="Planilha Acordo" target="_blank" ajax="false">
                                            <p:commandButton icon="ui-icon-print" value="Planilha Acordo" style="margin-right: 15px" title="Planilha Acordo" ajax="false"/>
                                        </p:commandLink>
                                    </h:column>

                                    <h:column>
                                        <p:commandLink action="#{extratoTelaSocialBean.imprimirPromissoria}" title="Promissória Acordo" target="_blank" ajax="false" disabled="true">
                                            <p:commandButton icon="ui-icon-print" value="Promissória Acordo" title="Promissória Acordo" ajax="false"/>
                                        </p:commandLink>
                                    </h:column>

                                </h:panelGrid>
                            </p:panel>

                            <p:dialog widgetVar="dlg_gerar_remessa" header="Gerador Arquivo Remessa" resizable="false" draggable="false" width="950" position="top" visible="#{extratoTelaSocialBean.visibleModalRemessa}">
                                <p:ajax event="close" update="formExtratoTelaSocial" listener="#{extratoTelaSocialBean.fecharModalRemessa}"/>

                                <h:panelGrid id="dlg_gerar_remessa" style="width: 100%">
                                    <p:messages autoUpdate="true" closable="true" showDetail="true" />

                                    <h:panelGrid columns="2">
                                        <p:selectBooleanButton value="#{extratoTelaSocialBean.verListaRemessa}" onLabel="NÃO VER LISTA DE BOLETO" offLabel="VER LISTA DE BOLETO" onIcon="ui-icon-close" offIcon="ui-icon-check" style="margin-right: 15px">
                                            <p:ajax update="dlg_gerar_remessa" />
                                        </p:selectBooleanButton>

                                        <p:outputLabel value="#{extratoTelaSocialBean.contaSelecionada.apelido} - #{extratoTelaSocialBean.contaSelecionada.codCedente} - #{extratoTelaSocialBean.contaSelecionada.contaBanco.banco.banco}" style="font-weight: bold; font-size: 11pt!important; "/>
                                    </h:panelGrid>

                                    <p:separator />

                                    <h:panelGrid rendered="#{extratoTelaSocialBean.verListaRemessa}">
                                        <p:dataTable value="#{extratoTelaSocialBean.listaBoletoRemessa}" var="linha_remessa" emptyMessage="Nenhum Boleto Adicionado" scrollable="true" scrollHeight="350" rowStyleClass="#{linha_remessa.tipo}">
                                            <p:column headerText="#" style="width: 80px; text-align: center">
                                                <h:outputText value="#{linha_remessa.boleto.id}" />
                                            </p:column>

                                            <p:column headerText="Boleto" style="width: 150px; text-align: center">
                                                <h:outputText value="#{linha_remessa.boleto.boletoComposto}" />
                                            </p:column>

                                            <p:column headerText="Pessoa">
                                                <h:outputText value="#{linha_remessa.boleto.pessoa.nome}" />
                                            </p:column>

                                            <p:column headerText="Vencimento" style="width: 80px; text-align: center">
                                                <h:outputText value="#{linha_remessa.boleto.vencimento}" />
                                            </p:column>

                                            <p:column headerText="Status" style="width: 80px; text-align: center">
                                                <h:outputText value="#{linha_remessa.statusRemessa.descricao}" style="font-weight: bold"/>
                                            </p:column>
                                        </p:dataTable>

                                        <h:panelGrid columns="4">
                                            <h:column>
                                                <div style="width: 15px; height: 15px; border:1px solid black;" class="tblExtratoTelaT1"></div>
                                            </h:column>
                                            <h:column>
                                                <b>Adicionados Automáticamente</b>
                                            </h:column>

                                            <h:column>
                                                <div style="width: 15px; height: 15px; border:1px solid black;"></div>
                                            </h:column>
                                            <h:column>
                                                <b>Adicionados por mim</b>
                                            </h:column>
                                        </h:panelGrid>

                                    </h:panelGrid>

                                    <h:panelGrid columns="2">
                                        <h:column>
                                            <p:outputLabel value="Quantidade de Boletos: " /><p:outputLabel value="#{extratoTelaSocialBean.listaBoletoRemessa.size()}" style="font-weight: bold"/>
                                        </h:column>

                                        <h:column>
                                            <p:outputLabel value="Limite médio de Arquivo: " /><p:outputLabel value="2000" style="font-weight: bold"/>
                                        </h:column>
                                        <!--
                                        <h:column>
                                            <p:outputLabel value="De um total de " /><p:outputLabel value="# {extratoTelaSocialBean.listaBoletoRemessaCount}" style="font-weight: bold"/><p:outputLabel value=" boletos" />
                                        </h:column>
                                        -->
                                    </h:panelGrid>

                                    <h:panelGrid columns="2">
                                        <p:commandButton icon="ui-icon-check" value="GERAR REMESSA" action="#{extratoTelaSocialBean.imprimirRemessa()}" ajax="false"/>
                                        <p:commandButton icon="ui-icon-circle-close" value="SAIR E CANCELAR REMESSA" title="Cancelar Geração de Arquivo Remessa" onclick="PF('dlg_gerar_remessa').hide()"/>
                                    </h:panelGrid>
                                </h:panelGrid>
                            </p:dialog>

                            <p:dialog widgetVar="dlg_opcao_remessa" header="Opções da Remessa Selecionada" resizable="false" width="450" modal="true">

                                <h:panelGrid columns="1">
                                    <p:outputLabel value="O que fazer com os boletos selecionados?" style="font-size: 12pt!important; font-weight: bold"/>
                                </h:panelGrid>
                                <br />
                                <h:panelGrid columns="3">
                                    <p:commandButton icon="ui-icon-plus" value="REGISTRAR" title="Registrar" onclick="PF('dlg_opcao_remessa').hide()" action="#{extratoTelaSocialBean.adicionarRemessa('registrar')}"/>
                                    <p:commandButton icon="ui-icon-arrowthick-1-s" value="BAIXAR NO BANCO" title="Baixar no Banco" onclick="PF('dlg_opcao_remessa').hide()" action="#{extratoTelaSocialBean.adicionarRemessa('baixar_banco')}"/>
                                    <p:commandButton icon="ui-icon-circle-close" value="FECHAR" title="Cancelar Geração" onclick="PF('dlg_opcao_remessa').hide()"/>
                                </h:panelGrid>

                            </p:dialog>

                            <p:dialog widgetVar="dlg_excluir" header="Excluir Movimentos" resizable="false" modal="true" width="400">
                                <h:panelGrid>
                                    <p:outputLabel value="Deseja realmente excluir esses movimentos?" style="font-weight: bold; font-size: 12pt!important"/>
                                </h:panelGrid>

                                <p:messages id="i_msg_excluir" closable="true" showDetail="true"/>

                                <h:panelGrid style="width: 100%"> 
                                    <p:outputLabel value="Digite o motivo para exclusão"/>
                                    <p:inputTextarea value="#{extratoTelaSocialBean.historico}" rows="5" style="width: 100%" />
                                </h:panelGrid>

                                <h:panelGrid columns="2">
                                    <p:commandButton icon="ui-icon-circle-check" value="Sim" action="#{extratoTelaSocialBean.inativarBoleto}" title="Excluir boletos selecionados" update="i_msg_excluir"/>
                                    <p:commandButton icon="ui-icon-circle-close" value="Não" title="Cancelar exclusão" onclick="PF('dlg_excluir').hide()" global="false"/>
                                </h:panelGrid>
                            </p:dialog>

                            <p:dialog widgetVar="dlg_estornar" header="Estornar Movimentos" resizable="false" modal="true" width="400">
                                <h:panelGrid>
                                    <p:outputLabel value="Deseja realmente ESTORNAR esses movimentos?" style="font-weight: bold; font-size: 12pt!important"/>
                                </h:panelGrid>

                                <p:messages id="i_msg_estornar" closable="true" showDetail="true"/>

                                <h:panelGrid style="width: 100%">
                                    <p:outputLabel value="Digite um motivo para o Estorno." /><br />
                                    <p:inputTextarea value="#{extratoTelaSocialBean.motivoEstorno}" style="width: 100%" rows="2"/>
                                </h:panelGrid>

                                <br />

                                <h:panelGrid columns="2">
                                    <p:commandButton icon="ui-icon-circle-check" value="Sim" action="#{extratoTelaSocialBean.estornarBaixa()}" title="Estornar boletos selecionados" update="i_msg_estornar"/>
                                    <p:commandButton icon="ui-icon-circle-close" value="Não" title="Cancelar Estorno" onclick="PF('dlg_estornar').hide()" global="false"/>
                                </h:panelGrid>
                            </p:dialog>

                            <p:dialog widgetVar="dlg_enviar_email" header="Enviar Email" resizable="false" modal="true" width="400">
                                <h:panelGrid>
                                    <p:outputLabel value="Deseja realmente ENVIAR esses movimentos por EMAIL?" style="font-weight: bold; font-size: 12pt!important"/>
                                </h:panelGrid>
                                <p:messages id="i_msg_enviar_email" closable="true" showDetail="true"/>

                                <h:panelGrid columns="2">
                                    <p:commandButton icon="ui-icon-circle-check" value="Sim" action="#{extratoTelaSocialBean.enviarEmail()}" title="Enviar boletos selecionados" update="i_msg_enviar_email"/>
                                    <p:commandButton icon="ui-icon-circle-close" value="Não" title="Cancelar Envio de Email" onclick="PF('dlg_enviar_email').hide()" global="false"/>
                                </h:panelGrid>
                            </p:dialog>

                            <p:dialog widgetVar="dlg_acordo" header="Excluir Acordos" resizable="false" modal="true" width="400">
                                <h:panelGrid>
                                    <p:outputLabel value="Deseja realmente EXCLUIR esses acordos?" style="font-weight: bold; font-size: 12pt!important"/>
                                </h:panelGrid>

                                <p:messages id="i_msg_acordo" closable="true" showDetail="true"/>

                                <h:panelGrid columns="2">
                                    <p:commandButton icon="ui-icon-circle-check" value="Sim" action="#{extratoTelaSocialBean.excluirAcordo()}" title="Excluir acordos selecionados" update="i_msg_acordo"/>
                                    <p:commandButton icon="ui-icon-circle-close" value="Não" title="Cancelar exclusão de Acordos" onclick="PF('dlg_acordo').hide()" global="false"/>
                                </h:panelGrid>
                            </p:dialog>

                        </h:form>

                    </p:panel>

                </f:view>
                <!-- FINALIZA div wrap main -->
            </div>
        </div>
        <!-- FINALIZA div wrap main -->

        <div id="footerx">
            <f:subview id="footer">
                <ui:include src="templates/templateFooter.xhtml"/>
            </f:subview>
        </div>                
    </h:body>
</ui:composition>